<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì´ˆë¡±ì´ì˜ ì‘ì€ ì •ì› - EduPet Collection</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- í•œê¸€ í°íŠ¸ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .font-game {
            font-family: 'Noto Sans KR', 'Comic Sans MS', cursive;
            font-weight: 600;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, 
                #e8f5e8 0%, 
                #f0f9ff 50%, 
                #fef3c7 100%
            );
        }
        
        .plant-pot {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .plant-pot:hover {
            transform: scale(1.05);
        }
        
        .plant-growing {
            animation: gentleGrow 3s ease-in-out infinite alternate;
        }
        
        @keyframes gentleGrow {
            from { transform: scale(1); }
            to { transform: scale(1.02); }
        }
        
        .plant-happy {
            animation: happyBounce 2s ease-in-out infinite;
        }
        
        @keyframes happyBounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        .water-drop {
            animation: waterFall 1s ease-out;
        }
        
        @keyframes waterFall {
            0% { 
                transform: translateY(-50px) scale(0); 
                opacity: 0; 
            }
            50% { 
                transform: translateY(0) scale(1); 
                opacity: 1; 
            }
            100% { 
                transform: translateY(20px) scale(0.5); 
                opacity: 0; 
            }
        }
        
        .love-heart {
            animation: loveFloat 2s ease-out;
        }
        
        @keyframes loveFloat {
            0% { 
                transform: translateY(0) scale(0); 
                opacity: 0; 
            }
            30% { 
                transform: translateY(-20px) scale(1); 
                opacity: 1; 
            }
            100% { 
                transform: translateY(-60px) scale(0.5); 
                opacity: 0; 
            }
        }
        
        .speech-bubble {
            animation: bubblePop 0.5s ease-out;
        }
        
        @keyframes bubblePop {
            0% { transform: scale(0) translateY(20px); opacity: 0; }
            100% { transform: scale(1) translateY(0); opacity: 1; }
        }
        
        .modal-enter {
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: { 500: '#4CAF50', 600: '#16a34a' },
                        secondary: { 500: '#FF9800', 600: '#ea580c' }
                    }
                }
            }
        }
    </script>
</head>
<body class="gradient-bg min-h-screen">
    <div class="container mx-auto px-4 py-6 max-w-4xl">
        <!-- í—¤ë” -->
        <div class="flex items-center justify-between mb-6">
            <button onclick="window.location.href='index.html'" class="flex items-center space-x-2 p-3 bg-white rounded-xl shadow-md hover:shadow-lg transition-all">
                <span>â†</span>
                <span>í™ˆìœ¼ë¡œ</span>
            </button>
            
            <div class="text-center">
                <h1 class="text-2xl font-bold text-gray-900 font-game">ğŸŒ± ì´ˆë¡±ì´ì˜ ì‘ì€ ì •ì›</h1>
                <p class="text-sm text-gray-600">ì‚¬ë‘ìœ¼ë¡œ í‚¤ìš°ëŠ” ìš°ë¦¬ ì‹ë¬¼ì¹œêµ¬ë“¤</p>
            </div>
            
            <div class="text-right">
                <div class="flex items-center space-x-2 text-blue-600 font-bold">
                    <span>ğŸ’§</span>
                    <span id="water-count">5</span>
                </div>
                <div class="text-xs text-gray-500">ë¬¼ë°©ìš¸</div>
            </div>
        </div>

        <!-- ì•ˆë‚´ ë©”ì‹œì§€ -->
        <div class="bg-white rounded-xl p-4 mb-6 shadow-md border-l-4 border-green-400">
            <div class="flex items-center space-x-3">
                <span class="text-2xl">ğŸ’š</span>
                <div>
                    <h3 class="font-bold text-gray-900">ì •ì› ê°€ê¾¸ê¸° ì•ˆë‚´</h3>
                    <p class="text-sm text-gray-600">
                        ìµœëŒ€ 2ê°œì˜ ì‹ë¬¼ì„ í‚¤ìš¸ ìˆ˜ ìˆì–´ìš”. ë¬¼ì„ ì£¼ë©´ì„œ í•™ìŠµí•˜ê³ , ì‚¬ë‘ìœ¼ë¡œ ëŒë´ì£¼ì„¸ìš”! ğŸŒ¿
                    </p>
                </div>
            </div>
        </div>

        <!-- ì‹ë¬¼ í™”ë¶„ êµ¬ì—­ -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <!-- í™”ë¶„ 1 -->
            <div class="bg-white rounded-xl p-6 shadow-lg border-2 border-green-200">
                <div class="text-center mb-4">
                    <h3 class="text-lg font-bold text-gray-800">ğŸª´ í™”ë¶„ #1</h3>
                    <div class="text-xs text-gray-500" id="pot1-name">ë¹ˆ í™”ë¶„</div>
                </div>
                
                <div class="relative">
                    <!-- í™”ë¶„ ì˜ì—­ -->
                    <div class="plant-pot bg-amber-100 rounded-lg border-4 border-amber-300 h-48 flex flex-col items-center justify-end p-4 relative overflow-hidden" 
                         id="pot1" onclick="interactWithPlant(1)">
                        
                        <!-- ì‹ë¬¼ í‘œì‹œ ì˜ì—­ -->
                        <div id="plant1-display" class="absolute bottom-4 left-1/2 transform -translate-x-1/2">
                            <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
                        </div>
                        
                        <!-- ë¹ˆ í™”ë¶„ í‘œì‹œ -->
                        <div id="empty-pot1" class="text-center">
                            <div class="text-4xl mb-2">ğŸ•³ï¸</div>
                            <div class="text-sm text-gray-500">ì”¨ì•—ì„ ì‹¬ì–´ë³´ì„¸ìš”</div>
                        </div>
                    </div>
                    
                    <!-- ìƒí˜¸ì‘ìš© ë²„íŠ¼ë“¤ -->
                    <div class="mt-4 flex justify-center space-x-2" id="pot1-actions">
                        <button onclick="plantSeed(1)" class="px-4 py-2 bg-green-500 text-white rounded-lg text-sm hover:bg-green-600 transition-all">
                            ğŸŒ° ì”¨ì•— ì‹¬ê¸°
                        </button>
                    </div>
                </div>
                
                <!-- ì‹ë¬¼ ì •ë³´ -->
                <div id="plant1-info" class="mt-4 text-center hidden">
                    <div class="text-sm text-gray-600" id="plant1-stage">ë‹¨ê³„: ì”¨ì•—</div>
                    <div class="text-sm text-gray-600" id="plant1-care">ëŒë´„ ì •ë„: 0%</div>
                    <div class="mt-2">
                        <div class="bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full transition-all duration-500" 
                                 id="plant1-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- í™”ë¶„ 2 -->
            <div class="bg-white rounded-xl p-6 shadow-lg border-2 border-green-200">
                <div class="text-center mb-4">
                    <h3 class="text-lg font-bold text-gray-800">ğŸª´ í™”ë¶„ #2</h3>
                    <div class="text-xs text-gray-500" id="pot2-name">ë¹ˆ í™”ë¶„</div>
                </div>
                
                <div class="relative">
                    <!-- í™”ë¶„ ì˜ì—­ -->
                    <div class="plant-pot bg-amber-100 rounded-lg border-4 border-amber-300 h-48 flex flex-col items-center justify-end p-4 relative overflow-hidden" 
                         id="pot2" onclick="interactWithPlant(2)">
                        
                        <!-- ì‹ë¬¼ í‘œì‹œ ì˜ì—­ -->
                        <div id="plant2-display" class="absolute bottom-4 left-1/2 transform -translate-x-1/2">
                            <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
                        </div>
                        
                        <!-- ë¹ˆ í™”ë¶„ í‘œì‹œ -->
                        <div id="empty-pot2" class="text-center">
                            <div class="text-4xl mb-2">ğŸ•³ï¸</div>
                            <div class="text-sm text-gray-500">ì”¨ì•—ì„ ì‹¬ì–´ë³´ì„¸ìš”</div>
                        </div>
                    </div>
                    
                    <!-- ìƒí˜¸ì‘ìš© ë²„íŠ¼ë“¤ -->
                    <div class="mt-4 flex justify-center space-x-2" id="pot2-actions">
                        <button onclick="plantSeed(2)" class="px-4 py-2 bg-green-500 text-white rounded-lg text-sm hover:bg-green-600 transition-all">
                            ğŸŒ° ì”¨ì•— ì‹¬ê¸°
                        </button>
                    </div>
                </div>
                
                <!-- ì‹ë¬¼ ì •ë³´ -->
                <div id="plant2-info" class="mt-4 text-center hidden">
                    <div class="text-sm text-gray-600" id="plant2-stage">ë‹¨ê³„: ì”¨ì•—</div>
                    <div class="text-sm text-gray-600" id="plant2-care">ëŒë´„ ì •ë„: 0%</div>
                    <div class="mt-2">
                        <div class="bg-gray-200 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full transition-all duration-500" 
                                 id="plant2-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ë¬¼ì£¼ê¸° ì•ˆë‚´ -->
        <div class="bg-blue-50 rounded-xl p-4 mb-6 border border-blue-200">
            <div class="text-center">
                <h3 class="font-bold text-blue-900 mb-2">ğŸ’§ ë¬¼ì£¼ê¸° ë°©ë²•</h3>
                <p class="text-sm text-blue-700 mb-3">
                    ì‹ë¬¼ì„ í´ë¦­í•˜ë©´ ë¬¼ì„ ì£¼ë©´ì„œ í•™ìŠµí•  ìˆ˜ ìˆì–´ìš”!<br>
                    ë¬¸ì œì˜ ì •ë‹µê³¼ í•´ì„¤ì„ ë³´ë©´ì„œ ì‹ë¬¼ê³¼ í•¨ê»˜ ë°°ì›Œë³´ì„¸ìš”.
                </p>
                <div class="text-xs text-blue-600">
                    ğŸ’¡ íŒ: ìì£¼ ë¬¼ì„ ì¤„ìˆ˜ë¡ ë” ì˜ˆìœ ì‹ë¬¼ë¡œ ìë¼ë‚©ë‹ˆë‹¤!
                </div>
            </div>
        </div>
    </div>

    <!-- ì”¨ì•— ì„ íƒ ëª¨ë‹¬ -->
    <div id="seed-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl p-6 max-w-md w-full modal-enter">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-bold">ğŸŒ° ì”¨ì•— ì„ íƒí•˜ê¸°</h3>
                <button onclick="closeSeedModal()" class="text-gray-400 hover:text-gray-600 text-xl">&times;</button>
            </div>
            <div class="space-y-3">
                <button onclick="selectSeed('mystery')" class="w-full p-4 text-left rounded-lg border-2 border-green-300 hover:bg-green-50 transition-all">
                    <div class="flex items-center space-x-3">
                        <span class="text-3xl">ğŸ</span>
                        <div>
                            <div class="font-bold text-gray-800">ì‹ ë¹„í•œ ì”¨ì•—</div>
                            <div class="text-sm text-gray-600">ë¬´ì—‡ì´ ë‚˜ì˜¬ê¹Œìš”? ì •ì„±ê» í‚¤ì›Œë³´ì„¸ìš”!</div>
                        </div>
                    </div>
                </button>
                <button onclick="selectSeed('flower')" class="w-full p-4 text-left rounded-lg border-2 border-pink-300 hover:bg-pink-50 transition-all">
                    <div class="flex items-center space-x-3">
                        <span class="text-3xl">ğŸŒ¸</span>
                        <div>
                            <div class="font-bold text-gray-800">ê½ƒ ì”¨ì•—</div>
                            <div class="text-sm text-gray-600">ì˜ˆìœ ê½ƒì´ í•„ ê°€ëŠ¥ì„±ì´ ë†’ì•„ìš”</div>
                        </div>
                    </div>
                </button>
                <button onclick="selectSeed('fruit')" class="w-full p-4 text-left rounded-lg border-2 border-orange-300 hover:bg-orange-50 transition-all">
                    <div class="flex items-center space-x-3">
                        <span class="text-3xl">ğŸ</span>
                        <div>
                            <div class="font-bold text-gray-800">ê³¼ì¼ ì”¨ì•—</div>
                            <div class="text-sm text-gray-600">ë§›ìˆëŠ” ê³¼ì¼ì´ ì—´ë¦´ ê°€ëŠ¥ì„±ì´ ë†’ì•„ìš”</div>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- ë¬¼ì£¼ê¸° í•™ìŠµ ëª¨ë‹¬ -->
    <div id="watering-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
        <div class="bg-white rounded-xl p-6 max-w-lg w-full modal-enter">
            <div class="text-center mb-4">
                <div class="text-4xl mb-2" id="plant-character">ğŸŒ±</div>
                <h3 class="text-lg font-bold" id="plant-speech">ì•ˆë…•! ë‚˜ì—ê²Œ ë¬¼ì„ ì¤˜!</h3>
            </div>
            
            <!-- í•™ìŠµ ë‚´ìš© -->
            <div class="bg-blue-50 rounded-lg p-4 mb-4" id="learning-content">
                <div class="font-bold text-blue-900 mb-2" id="question-title">ì˜¤ëŠ˜ì˜ í•™ìŠµ</div>
                <div class="text-sm text-blue-800 mb-3" id="question-text">
                    ë¬¸ì œ: ë‹¤ìŒ ì¤‘ 'apple'ì˜ ëœ»ì€?
                </div>
                <div class="text-sm text-green-800 mb-2" id="answer-text">
                    <strong>ì •ë‹µ:</strong> ì‚¬ê³¼
                </div>
                <div class="text-sm text-gray-700" id="explanation-text">
                    <strong>í•´ì„¤:</strong> Appleì€ ì‚¬ê³¼ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì˜ì–´ì—ì„œ ê°€ì¥ ê¸°ë³¸ì ì¸ ê³¼ì¼ ë‹¨ì–´ ì¤‘ í•˜ë‚˜ì˜ˆìš”.
                </div>
            </div>
            
            <div class="text-center mb-4">
                <button onclick="giveWater()" class="px-8 py-3 bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 transition-all">
                    ğŸ’§ ë¬¼ ì£¼ê¸°
                </button>
            </div>
            
            <div class="text-center">
                <button onclick="closeWateringModal()" class="text-gray-500 text-sm hover:text-gray-700">
                    ë‚˜ì¤‘ì— í•˜ê¸°
                </button>
            </div>
        </div>
    </div>

    <!-- ì‹ë¬¼ ëŒ€í™” íŒì—… -->
    <div id="plant-speech-popup" class="hidden fixed top-20 left-1/2 transform -translate-x-1/2 bg-white rounded-xl shadow-lg border-2 border-green-300 p-4 z-40">
        <div class="speech-bubble text-center">
            <div class="text-sm font-medium text-gray-800" id="popup-text">ì•ˆë…•í•˜ì„¸ìš”!</div>
            <div class="absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full">
                <div class="w-0 h-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-green-300"></div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // ê²Œì„ ìƒíƒœ
        let gameState = {
            water: 5,
            plants: {
                1: null,
                2: null
            }
        };

        let currentPot = null;
        let selectedSeedType = null;

        // ì‹ë¬¼ ë°ì´í„°
        const plantTypes = {
            mystery: {
                name: 'ì‹ ë¹„í•œ ì‹ë¬¼',
                stages: [
                    { icon: 'ğŸŒ°', name: 'ì”¨ì•—', speech: 'ì•ˆë…•! ë‚˜ëŠ” ì‹ ë¹„í•œ ì”¨ì•—ì´ì•¼!' },
                    { icon: 'ğŸŒ±', name: 'ìƒˆì‹¹', speech: 'ë¬¼ì„ ì¤˜ì„œ ê³ ë§ˆì›Œ! ì‘¥ì‘¥ ìë¼ê³  ìˆì–´!' },
                    { icon: 'ğŸŒ¿', name: 'ì¤„ê¸°', speech: 'ì´ì œ ê³§ ë­”ê°€ íŠ¹ë³„í•œ ê²Œ ìƒê¸¸ ê²ƒ ê°™ì•„!' }
                ],
                possibleResults: ['ğŸŒ¸', 'ğŸŒº', 'ğŸŒ»', 'ğŸŒ·', 'ğŸŒ¹', 'ğŸª·']
            },
            flower: {
                name: 'ê½ƒì‹ë¬¼',
                stages: [
                    { icon: 'ğŸŒ°', name: 'ê½ƒì”¨', speech: 'ì•ˆë…•! ë‚˜ëŠ” ì˜ˆìœ ê½ƒì´ ë  ì”¨ì•—ì´ì•¼!' },
                    { icon: 'ğŸŒ±', name: 'ê½ƒìƒˆì‹¹', speech: 'ë¬¼ì„ ë§ˆì‹œë‹ˆê¹Œ ê¸°ë¶„ì´ ì¢‹ì•„!' },
                    { icon: 'ğŸŒ¿', name: 'ê½ƒì¤„ê¸°', speech: 'ê³§ ì˜ˆìœ ê½ƒì´ í•„ ê±°ì•¼!' }
                ],
                possibleResults: ['ğŸŒ¸', 'ğŸŒº', 'ğŸŒ»', 'ğŸŒ·', 'ğŸŒ¹']
            },
            fruit: {
                name: 'ê³¼ì¼ë‚˜ë¬´',
                stages: [
                    { icon: 'ğŸŒ°', name: 'ê³¼ì¼ì”¨', speech: 'ì•ˆë…•! ë‚˜ëŠ” ë§›ìˆëŠ” ê³¼ì¼ì´ ë  ì”¨ì•—ì´ì•¼!' },
                    { icon: 'ğŸŒ±', name: 'ê³¼ì¼ìƒˆì‹¹', speech: 'ë¬¼ì„ ì£¼ë‹ˆê¹Œ í˜ì´ ë‚˜!' },
                    { icon: 'ğŸŒ¿', name: 'ê³¼ì¼ì¤„ê¸°', speech: 'ë§›ìˆëŠ” ê³¼ì¼ì„ ë§Œë“¤ì–´ì¤„ê²Œ!' }
                ],
                possibleResults: ['ğŸ', 'ğŸŠ', 'ğŸŒ', 'ğŸ“', 'ğŸ‘', 'ğŸ¥']
            }
        };

        // í•™ìŠµ ë¬¸ì œ ìƒ˜í”Œ (ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì˜¬ ê²ƒ)
        const sampleQuestions = [
            {
                question: "ë‹¤ìŒ ì¤‘ 'apple'ì˜ ëœ»ì€?",
                answer: "ì‚¬ê³¼",
                explanation: "Appleì€ ì‚¬ê³¼ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì˜ì–´ì—ì„œ ê°€ì¥ ê¸°ë³¸ì ì¸ ê³¼ì¼ ë‹¨ì–´ ì¤‘ í•˜ë‚˜ì˜ˆìš”."
            },
            {
                question: "'cat'ì˜ ëœ»ì€?",
                answer: "ê³ ì–‘ì´", 
                explanation: "Catì€ ê³ ì–‘ì´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ê·€ì—¬ìš´ ë™ë¬¼ì´ì£ !"
            },
            {
                question: "5 + 3 = ?",
                answer: "8",
                explanation: "5ì™€ 3ì„ ë”í•˜ë©´ 8ì…ë‹ˆë‹¤. ê°„ë‹¨í•œ ë§ì…ˆ ë¬¸ì œì˜ˆìš”."
            }
        ];

        // ì´ˆê¸°í™”
        function initializeGarden() {
            loadGameState();
            updateDisplay();
        }

        // ì”¨ì•— ì‹¬ê¸°
        function plantSeed(potNumber) {
            if (gameState.plants[potNumber]) {
                showPlantSpeech(`í™”ë¶„ ${potNumber}ì— ì´ë¯¸ ì‹ë¬¼ì´ ìˆì–´ìš”!`);
                return;
            }
            
            currentPot = potNumber;
            document.getElementById('seed-modal').classList.remove('hidden');
        }

        function selectSeed(type) {
            selectedSeedType = type;
            
            // ìƒˆë¡œìš´ ì‹ë¬¼ ìƒì„±
            gameState.plants[currentPot] = {
                type: type,
                stage: 0,
                care: 0,
                plantedAt: Date.now(),
                lastWatered: 0,
                finalResult: null
            };
            
            closeSeedModal();
            updatePlantDisplay(currentPot);
            showPlantSpeech(`${plantTypes[type].stages[0].speech}`);
            
            saveGameState();
        }

        function closeSeedModal() {
            document.getElementById('seed-modal').classList.add('hidden');
            currentPot = null;
            selectedSeedType = null;
        }

        // ì‹ë¬¼ê³¼ ìƒí˜¸ì‘ìš©
        function interactWithPlant(potNumber) {
            const plant = gameState.plants[potNumber];
            
            if (!plant) {
                plantSeed(potNumber);
                return;
            }

            if (gameState.water <= 0) {
                showPlantSpeech('ë¬¼ì´ ë¶€ì¡±í•´ìš”! í•™ìŠµì„ ì™„ë£Œí•˜ë©´ ë¬¼ì„ ì–»ì„ ìˆ˜ ìˆì–´ìš”.');
                return;
            }

            // ë¬¼ì£¼ê¸° ëª¨ë‹¬ ì—´ê¸°
            openWateringModal(potNumber);
        }

        // ë¬¼ì£¼ê¸° ëª¨ë‹¬ ì—´ê¸°
        function openWateringModal(potNumber) {
            const plant = gameState.plants[potNumber];
            const plantInfo = plantTypes[plant.type];
            const currentStage = plantInfo.stages[plant.stage];
            
            // ëœë¤ í•™ìŠµ ë¬¸ì œ ì„ íƒ
            const question = sampleQuestions[Math.floor(Math.random() * sampleQuestions.length)];
            
            document.getElementById('plant-character').textContent = currentStage.icon;
            document.getElementById('plant-speech').textContent = currentStage.speech;
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('answer-text').innerHTML = `<strong>ì •ë‹µ:</strong> ${question.answer}`;
            document.getElementById('explanation-text').innerHTML = `<strong>í•´ì„¤:</strong> ${question.explanation}`;
            
            currentPot = potNumber;
            document.getElementById('watering-modal').classList.remove('hidden');
        }

        function closeWateringModal() {
            document.getElementById('watering-modal').classList.add('hidden');
            currentPot = null;
        }

        // ë¬¼ ì£¼ê¸°
        function giveWater() {
            if (gameState.water <= 0 || !currentPot) return;
            
            const plant = gameState.plants[currentPot];
            const potElement = document.getElementById(`pot${currentPot}`);
            
            // ë¬¼ ì†Œëª¨
            gameState.water--;
            
            // ì‹ë¬¼ ëŒë´„ ì¦ê°€
            plant.care += 20;
            plant.lastWatered = Date.now();
            
            // ë¬¼ë°©ìš¸ ì• ë‹ˆë©”ì´ì…˜
            showWaterAnimation(potElement);
            
            // í•˜íŠ¸ ì• ë‹ˆë©”ì´ì…˜
            setTimeout(() => {
                showLoveAnimation(potElement);
            }, 500);
            
            // ì„±ì¥ ì²´í¬
            checkPlantGrowth(currentPot);
            
            closeWateringModal();
            updateDisplay();
            saveGameState();
            
            showPlantSpeech('ê³ ë§ˆì›Œ! ë¬¼ì´ ì •ë§ ì‹œì›í•´!');
        }

        // ì‹ë¬¼ ì„±ì¥ ì²´í¬
        function checkPlantGrowth(potNumber) {
            const plant = gameState.plants[potNumber];
            const plantInfo = plantTypes[plant.type];
            
            // í•˜ë£¨ê°€ ì§€ë‚¬ê³  ëŒë´„ì´ ì¶©ë¶„í•˜ë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ
            const daysPassed = (Date.now() - plant.plantedAt) / (1000 * 60 * 60 * 24);
            
            if (daysPassed >= 0.1 && plant.care >= 40 && plant.stage < plantInfo.stages.length - 1) { // í…ŒìŠ¤íŠ¸ìš©ìœ¼ë¡œ 0.1ì¼ë¡œ ì„¤ì •
                plant.stage++;
                showPlantSpeech(`ì™€! í•œ ë‹¨ê³„ ë” ìëì–´ìš”! ì´ì œ ${plantInfo.stages[plant.stage].name}ì´ì—ìš”!`);
                
                // ìµœì¢… ë‹¨ê³„ì—ì„œ ê²°ê³¼ ê²°ì •
                if (plant.stage === plantInfo.stages.length - 1) {
                    determineFinalResult(potNumber);
                }
            }
            
            updatePlantDisplay(potNumber);
        }

        // ìµœì¢… ê²°ê³¼ ê²°ì •
        function determineFinalResult(potNumber) {
            const plant = gameState.plants[potNumber];
            const plantInfo = plantTypes[plant.type];
            
            // ëŒë´„ ì •ë„ì— ë”°ë¼ ë” ì¢‹ì€ ê²°ê³¼
            let resultIndex = Math.floor(Math.random() * plantInfo.possibleResults.length);
            
            if (plant.care >= 80) {
                // 80% ì´ìƒ ëŒë´„: ë” ì¢‹ì€ ê²°ê³¼ í™•ë¥  ì¦ê°€
                resultIndex = Math.min(resultIndex + 1, plantInfo.possibleResults.length - 1);
            }
            
            plant.finalResult = plantInfo.possibleResults[resultIndex];
            
            setTimeout(() => {
                showPlantSpeech(`ì§œì”! ë‚´ê°€ ë°”ë¡œ ${plant.finalResult}ì´ì•¼! ì •ì„±ê» í‚¤ì›Œì¤˜ì„œ ê³ ë§ˆì›Œ!`);
            }, 1000);
        }

        // ë””ìŠ¤í”Œë ˆì´ ì—…ë°ì´íŠ¸
        function updateDisplay() {
            document.getElementById('water-count').textContent = gameState.water;
            
            // ê° í™”ë¶„ ì—…ë°ì´íŠ¸
            [1, 2].forEach(potNumber => {
                updatePlantDisplay(potNumber);
            });
        }

        function updatePlantDisplay(potNumber) {
            const plant = gameState.plants[potNumber];
            const emptyElement = document.getElementById(`empty-pot${potNumber}`);
            const plantDisplay = document.getElementById(`plant${potNumber}-display`);
            const plantInfo = document.getElementById(`plant${potNumber}-info`);
            const potName = document.getElementById(`pot${potNumber}-name`);
            const actions = document.getElementById(`pot${potNumber}-actions`);
            
            if (!plant) {
                // ë¹ˆ í™”ë¶„
                emptyElement.classList.remove('hidden');
                plantDisplay.innerHTML = '';
                plantInfo.classList.add('hidden');
                potName.textContent = 'ë¹ˆ í™”ë¶„';
                actions.innerHTML = `
                    <button onclick="plantSeed(${potNumber})" class="px-4 py-2 bg-green-500 text-white rounded-lg text-sm hover:bg-green-600 transition-all">
                        ğŸŒ° ì”¨ì•— ì‹¬ê¸°
                    </button>
                `;
            } else {
                // ì‹ë¬¼ì´ ìˆëŠ” í™”ë¶„
                emptyElement.classList.add('hidden');
                plantInfo.classList.remove('hidden');
                
                const plantTypeInfo = plantTypes[plant.type];
                const currentStage = plantTypeInfo.stages[plant.stage];
                
                potName.textContent = plantTypeInfo.name;
                
                let displayIcon = currentStage.icon;
                if (plant.finalResult && plant.stage === plantTypeInfo.stages.length - 1) {
                    displayIcon = plant.finalResult;
                }
                
                plantDisplay.innerHTML = `
                    <div class="text-6xl plant-growing ${plant.care > 50 ? 'plant-happy' : ''}">${displayIcon}</div>
                `;
                
                document.getElementById(`plant${potNumber}-stage`).textContent = `ë‹¨ê³„: ${currentStage.name}`;
                document.getElementById(`plant${potNumber}-care`).textContent = `ëŒë´„ ì •ë„: ${Math.min(plant.care, 100)}%`;
                document.getElementById(`plant${potNumber}-progress`).style.width = `${Math.min(plant.care, 100)}%`;
                
                actions.innerHTML = `
                    <button onclick="interactWithPlant(${potNumber})" class="px-4 py-2 bg-blue-500 text-white rounded-lg text-sm hover:bg-blue-600 transition-all">
                        ğŸ’§ ë¬¼ì£¼ê¸°
                    </button>
                `;
            }
        }

        // ì• ë‹ˆë©”ì´ì…˜ í•¨ìˆ˜ë“¤
        function showWaterAnimation(potElement) {
            const waterDrop = document.createElement('div');
            waterDrop.innerHTML = 'ğŸ’§';
            waterDrop.className = 'absolute top-0 left-1/2 transform -translate-x-1/2 text-2xl water-drop pointer-events-none';
            potElement.appendChild(waterDrop);
            
            setTimeout(() => {
                potElement.removeChild(waterDrop);
            }, 1000);
        }

        function showLoveAnimation(potElement) {
            const heart = document.createElement('div');
            heart.innerHTML = 'ğŸ’š';
            heart.className = 'absolute bottom-8 left-1/2 transform -translate-x-1/2 text-xl love-heart pointer-events-none';
            potElement.appendChild(heart);
            
            setTimeout(() => {
                potElement.removeChild(heart);
            }, 2000);
        }

        function showPlantSpeech(message) {
            const popup = document.getElementById('plant-speech-popup');
            document.getElementById('popup-text').textContent = message;
            popup.classList.remove('hidden');
            
            setTimeout(() => {
                popup.classList.add('hidden');
            }, 3000);
        }

        // ê²Œì„ ìƒíƒœ ì €ì¥/ë¡œë“œ
        function saveGameState() {
            localStorage.setItem('simpleFarmState', JSON.stringify(gameState));
        }

        function loadGameState() {
            const saved = localStorage.getItem('simpleFarmState');
            if (saved) {
                const savedState = JSON.parse(saved);
                gameState = { ...gameState, ...savedState };
            }
        }

        // ë¬¼ ì¶©ì „ (í•™ìŠµ ì™„ë£Œ ì‹œ í˜¸ì¶œë  í•¨ìˆ˜)
        function addWater(amount = 3) {
            gameState.water += amount;
            updateDisplay();
            saveGameState();
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            initializeGarden();
            
            // 10ì´ˆë§ˆë‹¤ ì‹ë¬¼ ìƒíƒœ ì²´í¬
            setInterval(() => {
                [1, 2].forEach(potNumber => {
                    if (gameState.plants[potNumber]) {
                        checkPlantGrowth(potNumber);
                    }
                });
            }, 10000);
        });

        // ì™¸ë¶€ì—ì„œ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë“¤
        window.simpleFarm = {
            addWater: addWater,
            getGameState: () => gameState
        };
    </script>
</body>
</html>