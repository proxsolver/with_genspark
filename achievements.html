<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„±ê³¼ ë° ì—…ì  - EduPet Collection</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        
        .achievement-card {
            transition: all 0.3s ease;
        }
        
        .achievement-card.completed {
            background: linear-gradient(135deg, #fef3c7 0%, #f59e0b 100%);
            border-color: #d97706;
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.3);
        }
        
        .achievement-card.locked {
            opacity: 0.6;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }
        
        .achievement-progress {
            transition: width 0.5s ease;
        }
        
        .celebration {
            animation: celebrate 1s ease-out;
        }
        
        @keyframes celebrate {
            0%, 100% { transform: scale(1); }
            25% { transform: scale(1.1) rotate(-5deg); }
            50% { transform: scale(1.15) rotate(5deg); }
            75% { transform: scale(1.05) rotate(-2deg); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-yellow-50 to-orange-50 min-h-screen">
    <div class="container mx-auto px-4 py-6 max-w-md">
        <!-- Header -->
        <div class="text-center mb-6">
            <button onclick="goHome()" class="absolute left-4 top-6 text-2xl hover:scale-110 transition-transform">
                ğŸ 
            </button>
            <h1 class="text-2xl font-bold text-gray-800 mb-2">ğŸ† ì„±ê³¼ ë° ì—…ì </h1>
            <div class="text-sm text-gray-600">
                í•™ìŠµ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê³  ë³´ìƒì„ ë°›ìœ¼ì„¸ìš”!
            </div>
        </div>

        <!-- Claim Rewards Button -->
        <div class="mb-6 text-center">
            <button id="claimRewardsBtn" onclick="claimAllRewards()"
                    class="w-full px-6 py-4 bg-gradient-to-r from-yellow-400 to-orange-500 text-white rounded-xl text-xl font-bold hover:from-yellow-500 hover:to-orange-600 transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none shadow-lg"
                    disabled>
                ğŸ ëª¨ë“  ë³´ìƒ ìˆ˜ë ¹ (0ê°œ)
            </button>
        </div>

        <!-- Summary Stats -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center">
                ğŸ“Š ì „ì²´ í†µê³„
            </h2>
            <div class="grid grid-cols-3 gap-4 text-sm">
                <div class="text-center">
                    <div class="text-2xl font-bold text-blue-600" id="totalCorrect">0</div>
                    <div class="text-xs text-gray-500">ì´ ì •ë‹µ ìˆ˜</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-green-600" id="totalSessions">0</div>
                    <div class="text-xs text-gray-500">í•™ìŠµ ì„¸ì…˜</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-bold text-yellow-600" id="completedAchievements">0</div>
                    <div class="text-xs text-gray-500">ë‹¬ì„± ì—…ì </div>
                </div>
            </div>
        </div>

        <!-- Achievements -->
        <div class="space-y-4">
            <h2 class="text-lg font-bold text-gray-800">ğŸ¯ ì—…ì  ëª©ë¡</h2>

            <div id="achievementsList">
                <!-- Achievements will be populated here -->
            </div>
        </div>
    </div>

    <script>
        // Achievement definitions
        const achievements = [
            // ê¸°ì´ˆ í•™ìŠµ ì—…ì  (1-20)
            { id: 'first_quiz', name: 'ì²«ê±¸ìŒ', description: 'ì²« ë²ˆì§¸ í€´ì¦ˆ ì™„ë£Œí•˜ê¸°', icon: 'ğŸ¯', requirement: { type: 'sessions', value: 1 }, reward: { money: 10, normalTickets: 1 }, tier: 'bronze' },
            { id: 'correct_5', name: 'í•™ìŠµ ì‹œì‘', description: 'ì •ë‹µ 5ê°œ ë‹¬ì„±', icon: 'ğŸ“', requirement: { type: 'totalCorrect', value: 5 }, reward: { money: 20 }, tier: 'bronze' },
            { id: 'correct_10', name: 'í•™ìŠµ ìƒˆì‹¹', description: 'ì •ë‹µ 10ê°œ ë‹¬ì„±', icon: 'ğŸŒ±', requirement: { type: 'totalCorrect', value: 10 }, reward: { money: 30, normalTickets: 1 }, tier: 'bronze' },
            { id: 'correct_25', name: 'ë½‘ê¸° ë§ˆìŠ¤í„°', description: 'ì •ë‹µ 25ê°œ ë‹¬ì„±', icon: 'ğŸ«', requirement: { type: 'totalCorrect', value: 25 }, reward: { money: 50, normalTickets: 2 }, tier: 'bronze' },
            { id: 'correct_50', name: 'ì§€ì‹ì˜ ë¹›', description: 'ì •ë‹µ 50ê°œ ë‹¬ì„±', icon: 'ğŸ’¡', requirement: { type: 'totalCorrect', value: 50 }, reward: { money: 80, normalTickets: 3 }, tier: 'silver' },
            { id: 'correct_75', name: 'ê¾¸ì¤€í•œ ë…¸ë ¥', description: 'ì •ë‹µ 75ê°œ ë‹¬ì„±', icon: 'ğŸ“š', requirement: { type: 'totalCorrect', value: 75 }, reward: { money: 100, normalTickets: 3 }, tier: 'silver' },
            { id: 'correct_100', name: 'í•™ìŠµ ë‹¬ì¸', description: 'ì •ë‹µ 100ê°œ ë‹¬ì„±', icon: 'ğŸ§ ', requirement: { type: 'totalCorrect', value: 100 }, reward: { money: 100, normalTickets: 5 }, tier: 'silver' },
            { id: 'correct_150', name: 'ì§€ì‹ íƒêµ¬ì', description: 'ì •ë‹µ 150ê°œ ë‹¬ì„±', icon: 'ğŸ”', requirement: { type: 'totalCorrect', value: 150 }, reward: { money: 100, premiumTickets: 1 }, tier: 'gold' },
            { id: 'correct_200', name: 'í•™ìŠµ ì±”í”¼ì–¸', description: 'ì •ë‹µ 200ê°œ ë‹¬ì„±', icon: 'ğŸ†', requirement: { type: 'totalCorrect', value: 200 }, reward: { money: 100, premiumTickets: 1 }, tier: 'gold' },
            { id: 'correct_300', name: 'ì§€ì‹ì˜ ê±°ì¥', description: 'ì •ë‹µ 300ê°œ ë‹¬ì„±', icon: 'ğŸ‘‘', requirement: { type: 'totalCorrect', value: 300 }, reward: { money: 500 }, tier: 'gold' },
            { id: 'correct_400', name: 'í•™ìŠµì˜ ì‹ ', description: 'ì •ë‹µ 400ê°œ ë‹¬ì„±', icon: 'âœ¨', requirement: { type: 'totalCorrect', value: 400 }, reward: { money: 500 }, tier: 'diamond' },
            { id: 'correct_500', name: 'ì „ì„¤ì˜ ì‹œì‘', description: 'ì •ë‹µ 500ê°œ ë‹¬ì„±', icon: 'ğŸŒŸ', requirement: { type: 'totalCorrect', value: 500 }, reward: { money: 1000, premiumTickets: 1 }, tier: 'diamond' },
            { id: 'correct_750', name: 'ì§€ì‹ì˜ ë°”ë‹¤', description: 'ì •ë‹µ 750ê°œ ë‹¬ì„±', icon: 'ğŸŒŠ', requirement: { type: 'totalCorrect', value: 750 }, reward: { money: 1000 }, tier: 'diamond' },
            { id: 'correct_1000', name: 'ì²œì¬ í•™ìŠµì', description: 'ì •ë‹µ 1000ê°œ ë‹¬ì„±', icon: 'ğŸ“', requirement: { type: 'totalCorrect', value: 1000 }, reward: { money: 1000, premiumTickets: 1 }, tier: 'diamond' },

            // í•™ìŠµ ì„¸ì…˜ ì—…ì  (15-34)
            { id: 'sessions_3', name: 'ì‹œì‘ì´ ë°˜', description: 'í•™ìŠµ ì„¸ì…˜ 3íšŒ ì™„ë£Œ', icon: 'ğŸŒ…', requirement: { type: 'sessions', value: 3 }, reward: { money: 30 }, tier: 'bronze' },
            { id: 'sessions_5', name: 'ê¾¸ì¤€í•¨ì˜ í˜', description: 'í•™ìŠµ ì„¸ì…˜ 5íšŒ ì™„ë£Œ', icon: 'â­', requirement: { type: 'sessions', value: 5 }, reward: { money: 50, normalTickets: 1 }, tier: 'bronze' },
            { id: 'sessions_10', name: 'ì„±ì‹¤í•œ í•™ìƒ', description: 'í•™ìŠµ ì„¸ì…˜ 10íšŒ ì™„ë£Œ', icon: 'ğŸ“š', requirement: { type: 'sessions', value: 10 }, reward: { money: 100, normalTickets: 2 }, tier: 'silver' },
            { id: 'sessions_15', name: 'í•™ìŠµ ìŠµê´€', description: 'í•™ìŠµ ì„¸ì…˜ 15íšŒ ì™„ë£Œ', icon: 'ğŸ¯', requirement: { type: 'sessions', value: 15 }, reward: { money: 150, normalTickets: 3 }, tier: 'silver' },
            { id: 'sessions_20', name: 'ê¾¸ì¤€í•œ ë°œê±¸ìŒ', description: 'í•™ìŠµ ì„¸ì…˜ 20íšŒ ì™„ë£Œ', icon: 'ğŸ‘£', requirement: { type: 'sessions', value: 20 }, reward: { money: 200, normalTickets: 4 }, tier: 'silver' },
            { id: 'sessions_30', name: 'í•œ ë‹¬ í•™ìŠµ', description: 'í•™ìŠµ ì„¸ì…˜ 30íšŒ ì™„ë£Œ', icon: 'ğŸ“…', requirement: { type: 'sessions', value: 30 }, reward: { money: 300, premiumTickets: 1 }, tier: 'gold' },
            { id: 'sessions_50', name: 'ë§ˆë¼í†¤ ëŸ¬ë„ˆ', description: 'í•™ìŠµ ì„¸ì…˜ 50íšŒ ì™„ë£Œ', icon: 'ğŸƒ', requirement: { type: 'sessions', value: 50 }, reward: { money: 500, premiumTickets: 2 }, tier: 'gold' },
            { id: 'sessions_75', name: 'í•™ìŠµ ë§ˆìŠ¤í„°', description: 'í•™ìŠµ ì„¸ì…˜ 75íšŒ ì™„ë£Œ', icon: 'ğŸ–ï¸', requirement: { type: 'sessions', value: 75 }, reward: { money: 700, premiumTickets: 3 }, tier: 'gold' },
            { id: 'sessions_100', name: 'ë°±ì „ë…¸ì¥', description: 'í•™ìŠµ ì„¸ì…˜ 100íšŒ ì™„ë£Œ', icon: 'ğŸ’ª', requirement: { type: 'sessions', value: 100 }, reward: { money: 1000, premiumTickets: 5 }, tier: 'diamond' },
            { id: 'sessions_150', name: 'ì´ˆì¸ì˜ ì˜ì§€', description: 'í•™ìŠµ ì„¸ì…˜ 150íšŒ ì™„ë£Œ', icon: 'ğŸ”¥', requirement: { type: 'sessions', value: 150 }, reward: { money: 1000, premiumTickets: 7 }, tier: 'diamond' },

            // ì™„ë²½ í•™ìŠµ ì—…ì  (25-39)
            { id: 'perfect_1', name: 'ì™„ë²½ì£¼ì˜ì', description: '100% ì •ë‹µë¥  1íšŒ ë‹¬ì„±', icon: 'ğŸ’', requirement: { type: 'perfectAccuracy', value: 1 }, reward: { money: 100, normalTickets: 3 }, tier: 'silver' },
            { id: 'perfect_3', name: 'ì •í™•í•œ í•™ìŠµ', description: '100% ì •ë‹µë¥  3íšŒ ë‹¬ì„±', icon: 'ğŸ¯', requirement: { type: 'perfectAccuracy', value: 3 }, reward: { money: 200, normalTickets: 5 }, tier: 'silver' },
            { id: 'perfect_5', name: 'ì™„ë²½ì˜ ë‹¬ì¸', description: '100% ì •ë‹µë¥  5íšŒ ë‹¬ì„±', icon: 'âœ¨', requirement: { type: 'perfectAccuracy', value: 5 }, reward: { money: 300, premiumTickets: 1 }, tier: 'gold' },
            { id: 'perfect_10', name: 'ì™„ë²½ì˜ ì‹ ', description: '100% ì •ë‹µë¥  10íšŒ ë‹¬ì„±', icon: 'ğŸ‘‘', requirement: { type: 'perfectAccuracy', value: 10 }, reward: { money: 500, premiumTickets: 2 }, tier: 'gold' },
            { id: 'perfect_20', name: 'ì ˆëŒ€ ì •í™•', description: '100% ì •ë‹µë¥  20íšŒ ë‹¬ì„±', icon: 'ğŸŒŸ', requirement: { type: 'perfectAccuracy', value: 20 }, reward: { money: 1000, premiumTickets: 5 }, tier: 'diamond' },

            // ë™ë¬¼ ìˆ˜ì§‘ ì—…ì  (30-54)
            { id: 'animal_1', name: 'ì²« ë²ˆì§¸ ì¹œêµ¬', description: 'ë™ë¬¼ 1ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸ£', requirement: { type: 'animalsCollected', value: 1 }, reward: { money: 20 }, tier: 'bronze' },
            { id: 'animal_3', name: 'ì‘ì€ ê°€ì¡±', description: 'ë™ë¬¼ 3ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸ¾', requirement: { type: 'animalsCollected', value: 3 }, reward: { money: 50, normalTickets: 1 }, tier: 'bronze' },
            { id: 'animal_5', name: 'ë™ë¬¼ ì¹œêµ¬ë“¤', description: 'ë™ë¬¼ 5ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸ¦Š', requirement: { type: 'animalsCollected', value: 5 }, reward: { money: 80, normalTickets: 2 }, tier: 'bronze' },
            { id: 'animal_10', name: 'ë™ë¬¼ ìˆ˜ì§‘ê°€', description: 'ë™ë¬¼ 10ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸ¦', requirement: { type: 'animalsCollected', value: 10 }, reward: { money: 150, normalTickets: 3 }, tier: 'silver' },
            { id: 'animal_15', name: 'ë™ë¬¼ì› ê´€ì¥', description: 'ë™ë¬¼ 15ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸª', requirement: { type: 'animalsCollected', value: 15 }, reward: { money: 200, normalTickets: 4 }, tier: 'silver' },
            { id: 'animal_20', name: 'ë™ë¬¼ ì• í˜¸ê°€', description: 'ë™ë¬¼ 20ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸ˜', requirement: { type: 'animalsCollected', value: 20 }, reward: { money: 250, premiumTickets: 1 }, tier: 'silver' },
            { id: 'animal_30', name: 'ë™ë¬¼ ë°•ì‚¬', description: 'ë™ë¬¼ 30ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸ”¬', requirement: { type: 'animalsCollected', value: 30 }, reward: { money: 300, premiumTickets: 2 }, tier: 'gold' },
            { id: 'animal_40', name: 'ì „ì„¤ì˜ ìˆ˜ì§‘ê°€', description: 'ë™ë¬¼ 40ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸ†', requirement: { type: 'animalsCollected', value: 40 }, reward: { money: 500, premiumTickets: 3 }, tier: 'gold' },
            { id: 'animal_50', name: 'ë™ë¬¼ ë§ˆìŠ¤í„°', description: 'ë™ë¬¼ 50ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸ‘‘', requirement: { type: 'animalsCollected', value: 50 }, reward: { money: 700, premiumTickets: 5 }, tier: 'diamond' },

            // í¬ê·€ ë™ë¬¼ ìˆ˜ì§‘ ì—…ì  (39-53)
            { id: 'rare_1', name: 'í¬ê·€í•œ ë§Œë‚¨', description: 'ë ˆì–´ ë™ë¬¼ 1ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸ’™', requirement: { type: 'rareAnimals', value: 1 }, reward: { money: 50, normalTickets: 2 }, tier: 'bronze' },
            { id: 'rare_3', name: 'ë ˆì–´ ì»¬ë ‰í„°', description: 'ë ˆì–´ ë™ë¬¼ 3ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸ’', requirement: { type: 'rareAnimals', value: 3 }, reward: { money: 100, normalTickets: 3 }, tier: 'silver' },
            { id: 'rare_5', name: 'ë ˆì–´ ë§ˆìŠ¤í„°', description: 'ë ˆì–´ ë™ë¬¼ 5ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸ­', requirement: { type: 'rareAnimals', value: 5 }, reward: { money: 200, premiumTickets: 1 }, tier: 'silver' },
            { id: 'epic_1', name: 'ì—í”½ì˜ ì˜ê´‘', description: 'ì—í”½ ë™ë¬¼ 1ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸ’œ', requirement: { type: 'epicAnimals', value: 1 }, reward: { money: 150, premiumTickets: 1 }, tier: 'gold' },
            { id: 'epic_3', name: 'ì—í”½ ì»¬ë ‰í„°', description: 'ì—í”½ ë™ë¬¼ 3ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸŒŒ', requirement: { type: 'epicAnimals', value: 3 }, reward: { money: 300, premiumTickets: 2 }, tier: 'gold' },
            { id: 'epic_5', name: 'ì—í”½ ë§ˆìŠ¤í„°', description: 'ì—í”½ ë™ë¬¼ 5ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸ‘‘', requirement: { type: 'epicAnimals', value: 5 }, reward: { money: 500, premiumTickets: 3 }, tier: 'gold' },
            { id: 'legendary_1', name: 'ì „ì„¤ì˜ ì‹œì‘', description: 'ë ˆì „ë”ë¦¬ ë™ë¬¼ 1ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'â­', requirement: { type: 'legendaryAnimals', value: 1 }, reward: { money: 300, premiumTickets: 3 }, tier: 'diamond' },
            { id: 'legendary_2', name: 'ì „ì„¤ ì»¬ë ‰í„°', description: 'ë ˆì „ë”ë¦¬ ë™ë¬¼ 2ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'ğŸŒŸ', requirement: { type: 'legendaryAnimals', value: 2 }, reward: { money: 500, premiumTickets: 5 }, tier: 'diamond' },
            { id: 'legendary_3', name: 'ì „ì„¤ì˜ ì£¼ì¸', description: 'ë ˆì „ë”ë¦¬ ë™ë¬¼ 3ë§ˆë¦¬ ìˆ˜ì§‘', icon: 'âœ¨', requirement: { type: 'legendaryAnimals', value: 3 }, reward: { money: 1000, premiumTickets: 10 }, tier: 'diamond' },

            // ì‹ë¬¼ ë³´í˜¸ ì—…ì  (48-62)
            { id: 'protect_1', name: 'ì‹ë¬¼ ìˆ˜í˜¸ì', description: 'ë™ë¬¼ë¡œ ì‹ë¬¼ ë³´í˜¸ 1íšŒ', icon: 'ğŸ›¡ï¸', requirement: { type: 'plantsProtected', value: 1 }, reward: { money: 100, normalTickets: 3 }, tier: 'silver' },
            { id: 'protect_3', name: 'ì¶©ì„±ìŠ¤ëŸ° ì¹œêµ¬', description: 'ë™ë¬¼ë¡œ ì‹ë¬¼ ë³´í˜¸ 3íšŒ', icon: 'ğŸ…', requirement: { type: 'plantsProtected', value: 3 }, reward: { money: 200, normalTickets: 5 }, tier: 'silver' },
            { id: 'protect_5', name: 'ìˆ˜í˜¸ì˜ ë‹¬ì¸', description: 'ë™ë¬¼ë¡œ ì‹ë¬¼ ë³´í˜¸ 5íšŒ', icon: 'âš”ï¸', requirement: { type: 'plantsProtected', value: 5 }, reward: { money: 300, premiumTickets: 1 }, tier: 'gold' },
            { id: 'protect_10', name: 'ì „ì„¤ì˜ ìˆ˜í˜¸ì', description: 'ë™ë¬¼ë¡œ ì‹ë¬¼ ë³´í˜¸ 10íšŒ', icon: 'ğŸ›¡ï¸', requirement: { type: 'plantsProtected', value: 10 }, reward: { money: 500, premiumTickets: 3 }, tier: 'gold' },
            { id: 'protect_20', name: 'ì ˆëŒ€ ìˆ˜í˜¸', description: 'ë™ë¬¼ë¡œ ì‹ë¬¼ ë³´í˜¸ 20íšŒ', icon: 'ğŸ‘¼', requirement: { type: 'plantsProtected', value: 20 }, reward: { money: 1000, premiumTickets: 5 }, tier: 'diamond' },

            // ì‹ë¬¼ ì„±ì¥ ì—…ì  (53-67)
            { id: 'plant_1', name: 'ì²« ë²ˆì§¸ ì‹ë¬¼', description: 'ì‹ë¬¼ 1ê°œ í‚¤ìš°ê¸°', icon: 'ğŸŒ°', requirement: { type: 'plantsGrown', value: 1 }, reward: { money: 20 }, tier: 'bronze' },
            { id: 'plant_3', name: 'ì‘ì€ ì •ì›', description: 'ì‹ë¬¼ 3ê°œ í‚¤ìš°ê¸°', icon: 'ğŸŒ¿', requirement: { type: 'plantsGrown', value: 3 }, reward: { money: 50, normalTickets: 1 }, tier: 'bronze' },
            { id: 'plant_5', name: 'ì •ì›ì‚¬', description: 'ì‹ë¬¼ 5ê°œ í‚¤ìš°ê¸°', icon: 'ğŸŒ±', requirement: { type: 'plantsGrown', value: 5 }, reward: { money: 100, normalTickets: 2 }, tier: 'silver' },
            { id: 'plant_10', name: 'ìˆ™ë ¨ëœ ì •ì›ì‚¬', description: 'ì‹ë¬¼ 10ê°œ í‚¤ìš°ê¸°', icon: 'ğŸŒ¸', requirement: { type: 'plantsGrown', value: 10 }, reward: { money: 200, normalTickets: 3 }, tier: 'silver' },
            { id: 'plant_15', name: 'ì •ì›ì˜ ë‹¬ì¸', description: 'ì‹ë¬¼ 15ê°œ í‚¤ìš°ê¸°', icon: 'ğŸŒº', requirement: { type: 'plantsGrown', value: 15 }, reward: { money: 300, premiumTickets: 1 }, tier: 'gold' },
            { id: 'plant_legendary', name: 'ì „ì„¤ì˜ ì‹ë¬¼', description: 'ë ˆì „ë”ë¦¬ ì‹ë¬¼ 1ê°œ ë‹¬ì„±', icon: 'ğŸ', requirement: { type: 'legendaryPlants', value: 1 }, reward: { money: 300, premiumTickets: 2 }, tier: 'gold' },
            { id: 'plant_legendary_3', name: 'ì „ì„¤ì˜ ì •ì›', description: 'ë ˆì „ë”ë¦¬ ì‹ë¬¼ 3ê°œ ë‹¬ì„±', icon: 'ğŸŒ³', requirement: { type: 'legendaryPlants', value: 3 }, reward: { money: 500, premiumTickets: 3 }, tier: 'gold' },
            { id: 'plant_legendary_5', name: 'ì‹ í™”ì˜ ì •ì›', description: 'ë ˆì „ë”ë¦¬ ì‹ë¬¼ 5ê°œ ë‹¬ì„±', icon: 'ğŸ„', requirement: { type: 'legendaryPlants', value: 5 }, reward: { money: 1000, premiumTickets: 5 }, tier: 'diamond' },

            // ì—°ì† í•™ìŠµ ì—…ì  (61-75)
            { id: 'streak_3', name: '3ì¼ ì—°ì† í•™ìŠµ', description: '3ì¼ ì—°ì†ìœ¼ë¡œ í•™ìŠµí•˜ê¸°', icon: 'ğŸ”¥', requirement: { type: 'streak', value: 3 }, reward: { money: 50, normalTickets: 1 }, tier: 'bronze' },
            { id: 'streak_7', name: 'ì¼ì£¼ì¼ ë‹¬ì„±', description: '7ì¼ ì—°ì†ìœ¼ë¡œ í•™ìŠµí•˜ê¸°', icon: 'ğŸ“†', requirement: { type: 'streak', value: 7 }, reward: { money: 100, normalTickets: 2 }, tier: 'silver' },
            { id: 'streak_14', name: '2ì£¼ ë§ˆë¼í†¤', description: '14ì¼ ì—°ì†ìœ¼ë¡œ í•™ìŠµí•˜ê¸°', icon: 'ğŸƒ', requirement: { type: 'streak', value: 14 }, reward: { money: 200, normalTickets: 3 }, tier: 'silver' },
            { id: 'streak_30', name: 'í•œ ë‹¬ ì±Œë¦°ì§€', description: '30ì¼ ì—°ì†ìœ¼ë¡œ í•™ìŠµí•˜ê¸°', icon: 'ğŸ“…', requirement: { type: 'streak', value: 30 }, reward: { money: 300, premiumTickets: 2 }, tier: 'gold' },
            { id: 'streak_60', name: 'ë‘ ë‹¬ ì±Œë¦°ì§€', description: '60ì¼ ì—°ì†ìœ¼ë¡œ í•™ìŠµí•˜ê¸°', icon: 'ğŸ–ï¸', requirement: { type: 'streak', value: 60 }, reward: { money: 500, premiumTickets: 3 }, tier: 'gold' },
            { id: 'streak_100', name: 'ë°±ì¼ì¥', description: '100ì¼ ì—°ì†ìœ¼ë¡œ í•™ìŠµí•˜ê¸°', icon: 'ğŸŒŸ', requirement: { type: 'streak', value: 100 }, reward: { money: 1000, premiumTickets: 5 }, tier: 'diamond' },

            // ê³¼ëª©ë³„ í•™ìŠµ ì—…ì  (67-81)
            { id: 'subject_math_50', name: 'ìˆ˜í•™ ì „ë¬¸ê°€', description: 'ìˆ˜í•™ 50ë¬¸ì œ ì •ë‹µ', icon: 'â—', requirement: { type: 'subjectCorrect', subject: 'math', value: 50 }, reward: { money: 100, normalTickets: 2 }, tier: 'silver' },
            { id: 'subject_english_50', name: 'ì˜ì–´ ì „ë¬¸ê°€', description: 'ì˜ì–´ 50ë¬¸ì œ ì •ë‹µ', icon: 'ğŸ”¤', requirement: { type: 'subjectCorrect', subject: 'english', value: 50 }, reward: { money: 100, normalTickets: 2 }, tier: 'silver' },
            { id: 'subject_science_50', name: 'ê³¼í•™ ì „ë¬¸ê°€', description: 'ê³¼í•™ 50ë¬¸ì œ ì •ë‹µ', icon: 'ğŸ”¬', requirement: { type: 'subjectCorrect', subject: 'science', value: 50 }, reward: { money: 100, normalTickets: 2 }, tier: 'silver' },
            { id: 'subject_korean_50', name: 'êµ­ì–´ ì „ë¬¸ê°€', description: 'êµ­ì–´ 50ë¬¸ì œ ì •ë‹µ', icon: 'ğŸ“–', requirement: { type: 'subjectCorrect', subject: 'korean', value: 50 }, reward: { money: 100, normalTickets: 2 }, tier: 'silver' },
            { id: 'subject_social_50', name: 'ì‚¬íšŒ ì „ë¬¸ê°€', description: 'ì‚¬íšŒ 50ë¬¸ì œ ì •ë‹µ', icon: 'ğŸŒ', requirement: { type: 'subjectCorrect', subject: 'social', value: 50 }, reward: { money: 100, normalTickets: 2 }, tier: 'silver' },
            { id: 'subject_math_100', name: 'ìˆ˜í•™ ë§ˆìŠ¤í„°', description: 'ìˆ˜í•™ 100ë¬¸ì œ ì •ë‹µ', icon: 'ğŸ§®', requirement: { type: 'subjectCorrect', subject: 'math', value: 100 }, reward: { money: 200, premiumTickets: 1 }, tier: 'gold' },
            { id: 'subject_english_100', name: 'ì˜ì–´ ë§ˆìŠ¤í„°', description: 'ì˜ì–´ 100ë¬¸ì œ ì •ë‹µ', icon: 'ğŸ“š', requirement: { type: 'subjectCorrect', subject: 'english', value: 100 }, reward: { money: 200, premiumTickets: 1 }, tier: 'gold' },
            { id: 'subject_science_100', name: 'ê³¼í•™ ë§ˆìŠ¤í„°', description: 'ê³¼í•™ 100ë¬¸ì œ ì •ë‹µ', icon: 'âš—ï¸', requirement: { type: 'subjectCorrect', subject: 'science', value: 100 }, reward: { money: 200, premiumTickets: 1 }, tier: 'gold' },
            { id: 'subject_all_subjects', name: 'ë§ŒëŠ¥ í•™ìŠµì', description: 'ëª¨ë“  ê³¼ëª© 10ë¬¸ì œ ì´ìƒ ì •ë‹µ', icon: 'ğŸ“', requirement: { type: 'allSubjects', value: 10 }, reward: { money: 300, premiumTickets: 2 }, tier: 'gold' },

            // ë‚œì´ë„ë³„ ì—…ì  (76-85)
            { id: 'hard_10', name: 'ì–´ë ¤ìš´ ë„ì „', description: 'ì–´ë ¤ìš´ ë¬¸ì œ 10ê°œ ì •ë‹µ', icon: 'ğŸ’ª', requirement: { type: 'hardQuestions', value: 10 }, reward: { money: 100, normalTickets: 2 }, tier: 'silver' },
            { id: 'hard_25', name: 'ë‚œê´€ ëŒíŒŒ', description: 'ì–´ë ¤ìš´ ë¬¸ì œ 25ê°œ ì •ë‹µ', icon: 'ğŸ”ï¸', requirement: { type: 'hardQuestions', value: 25 }, reward: { money: 200, normalTickets: 3 }, tier: 'silver' },
            { id: 'hard_50', name: 'ê³ ë‚œì˜ ì •ë³µì', description: 'ì–´ë ¤ìš´ ë¬¸ì œ 50ê°œ ì •ë‹µ', icon: 'â›°ï¸', requirement: { type: 'hardQuestions', value: 50 }, reward: { money: 300, premiumTickets: 2 }, tier: 'gold' },
            { id: 'hard_100', name: 'ë‚œì´ë„ì˜ ì‹ ', description: 'ì–´ë ¤ìš´ ë¬¸ì œ 100ê°œ ì •ë‹µ', icon: 'ğŸ—»', requirement: { type: 'hardQuestions', value: 100 }, reward: { money: 500, premiumTickets: 3 }, tier: 'gold' },

            // ì‹œê°„ ê´€ë ¨ ì—…ì  (80-89)
            { id: 'fast_answer_10', name: 'ë¹ ë¥¸ ì†', description: '5ì´ˆ ì•ˆì— ì •ë‹µ 10íšŒ', icon: 'âš¡', requirement: { type: 'fastAnswers', value: 10 }, reward: { money: 50, normalTickets: 1 }, tier: 'bronze' },
            { id: 'fast_answer_25', name: 'ë²ˆê°œê°™ì€ ë‘ë‡Œ', description: '5ì´ˆ ì•ˆì— ì •ë‹µ 25íšŒ', icon: 'âš¡', requirement: { type: 'fastAnswers', value: 25 }, reward: { money: 100, normalTickets: 2 }, tier: 'silver' },
            { id: 'fast_answer_50', name: 'ì´ˆê³ ì† í•™ìŠµ', description: '5ì´ˆ ì•ˆì— ì •ë‹µ 50íšŒ', icon: 'ğŸš€', requirement: { type: 'fastAnswers', value: 50 }, reward: { money: 200, premiumTickets: 1 }, tier: 'gold' },
            { id: 'study_time_1h', name: '1ì‹œê°„ í•™ìŠµ', description: 'ì´ 1ì‹œê°„ í•™ìŠµí•˜ê¸°', icon: 'â°', requirement: { type: 'studyTime', value: 60 }, reward: { money: 50, normalTickets: 1 }, tier: 'bronze' },
            { id: 'study_time_5h', name: '5ì‹œê°„ í•™ìŠµ', description: 'ì´ 5ì‹œê°„ í•™ìŠµí•˜ê¸°', icon: 'â³', requirement: { type: 'studyTime', value: 300 }, reward: { money: 150, normalTickets: 3 }, tier: 'silver' },
            { id: 'study_time_10h', name: '10ì‹œê°„ í•™ìŠµ', description: 'ì´ 10ì‹œê°„ í•™ìŠµí•˜ê¸°', icon: 'ğŸ“š', requirement: { type: 'studyTime', value: 600 }, reward: { money: 300, premiumTickets: 2 }, tier: 'gold' },
            { id: 'study_time_24h', name: 'í•˜ë£¨ í•™ìŠµ', description: 'ì´ 24ì‹œê°„ í•™ìŠµí•˜ê¸°', icon: 'ğŸŒ™', requirement: { type: 'studyTime', value: 1440 }, reward: { money: 500, premiumTickets: 3 }, tier: 'gold' },
            { id: 'study_time_50h', name: 'í•™ìŠµì™•', description: 'ì´ 50ì‹œê°„ í•™ìŠµí•˜ê¸°', icon: 'ğŸ‘‘', requirement: { type: 'studyTime', value: 3000 }, reward: { money: 1000, premiumTickets: 5 }, tier: 'diamond' },

            // íŠ¹ìˆ˜ ì—…ì  (88-100)
            { id: 'comeback', name: 'ì¬ê¸°ì˜ ë‹¬ì¸', description: 'í‹€ë¦° í›„ ì—°ì† 5ê°œ ì •ë‹µ', icon: 'ğŸ”„', requirement: { type: 'comeback', value: 5 }, reward: { money: 100, normalTickets: 2 }, tier: 'silver' },
            { id: 'no_skip', name: 'í¬ê¸°ë€ ì—†ë‹¤', description: 'ìŠ¤í‚µ ì—†ì´ ì„¸ì…˜ 10íšŒ ì™„ë£Œ', icon: 'ğŸ’¯', requirement: { type: 'noSkip', value: 10 }, reward: { money: 200, normalTickets: 3 }, tier: 'silver' },
            { id: 'early_bird', name: 'ì•„ì¹¨ í•™ìŠµì', description: 'ì˜¤ì „ 7ì‹œ ì´ì „ í•™ìŠµ 5íšŒ', icon: 'ğŸŒ…', requirement: { type: 'earlyBird', value: 5 }, reward: { money: 100, normalTickets: 2 }, tier: 'silver' },
            { id: 'night_owl', name: 'ë°¤ì˜ í•™ìŠµì', description: 'ì˜¤í›„ 9ì‹œ ì´í›„ í•™ìŠµ 5íšŒ', icon: 'ğŸ¦‰', requirement: { type: 'nightOwl', value: 5 }, reward: { money: 100, normalTickets: 2 }, tier: 'silver' },
            { id: 'weekend_warrior', name: 'ì£¼ë§ ì „ì‚¬', description: 'ì£¼ë§ í•™ìŠµ 10íšŒ', icon: 'ğŸ‰', requirement: { type: 'weekend', value: 10 }, reward: { money: 150, normalTickets: 3 }, tier: 'silver' },
            { id: 'gacha_addict', name: 'ë½‘ê¸° ì¤‘ë…', description: 'ë½‘ê¸° 50íšŒ ìˆ˜í–‰', icon: 'ğŸ°', requirement: { type: 'gachaCount', value: 50 }, reward: { money: 200, premiumTickets: 2 }, tier: 'gold' },
            { id: 'gacha_master', name: 'ë½‘ê¸° ë§ˆìŠ¤í„°', description: 'ë½‘ê¸° 100íšŒ ìˆ˜í–‰', icon: 'ğŸ²', requirement: { type: 'gachaCount', value: 100 }, reward: { money: 300, premiumTickets: 3 }, tier: 'gold' },
            { id: 'money_saver', name: 'ì €ì¶•ì˜ ë‹¬ì¸', description: '1000ì› ëª¨ìœ¼ê¸°', icon: 'ğŸ’°', requirement: { type: 'moneySaved', value: 1000 }, reward: { money: 100, premiumTickets: 1 }, tier: 'gold' },
            { id: 'ticket_collector', name: 'í‹°ì¼“ ìˆ˜ì§‘ê°€', description: 'ë½‘ê¸°ê¶Œ 20ì¥ íšë“', icon: 'ğŸ«', requirement: { type: 'ticketsEarned', value: 20 }, reward: { money: 200, premiumTickets: 2 }, tier: 'gold' },
            { id: 'ultimate_learner', name: 'ê¶ê·¹ì˜ í•™ìŠµì', description: 'ëª¨ë“  ì—…ì  ë‹¬ì„±', icon: 'ğŸ†', requirement: { type: 'allAchievements', value: 99 }, reward: { money: 1000, premiumTickets: 10 }, tier: 'diamond' }
        ];

        let userProgress = {};
        let unclaimedRewards = [];

        function loadUserProgress() {
            // Load quiz progress
            const quizProgress = JSON.parse(localStorage.getItem('quizProgress') || '{}');
            const animalCollection = JSON.parse(localStorage.getItem('animalCollection') || '{}');
            const farmState = JSON.parse(localStorage.getItem('simpleFarmState') || '{}');
            const plantSystemUser = JSON.parse(localStorage.getItem('plantSystemUser') || '{}');
            const plantSystemPlants = JSON.parse(localStorage.getItem('plantSystemPlants') || '{}');
            const learningProgress = JSON.parse(localStorage.getItem('learningProgress') || '{}');

            // Count rare animals by rarity
            const collection = animalCollection.collection || {};
            let rareCount = 0, epicCount = 0, legendaryCount = 0;
            Object.values(collection).forEach(animal => {
                if (animal.rarity === 'Rare') rareCount++;
                else if (animal.rarity === 'Epic') epicCount++;
                else if (animal.rarity === 'Legendary') legendaryCount++;
            });

            // Count plants grown and legendary plants
            const plants = Object.values(plantSystemPlants);
            const plantsGrown = plants.length;
            const legendaryPlants = plants.filter(p => p.stage === 4).length; // Stage 4 = fruit/legendary

            // Count subject-specific progress
            const subjectProgress = {};
            if (learningProgress.subjects) {
                Object.keys(learningProgress.subjects).forEach(subject => {
                    subjectProgress[subject] = learningProgress.subjects[subject].correct || 0;
                });
            }

            userProgress = {
                // Basic stats
                totalCorrect: quizProgress.totalCorrect || 0,
                sessions: quizProgress.sessionCount || 0,
                perfectAccuracy: quizProgress.perfectSessions || 0,

                // Animal collection
                animalsCollected: Object.keys(collection).length,
                rareAnimals: rareCount,
                epicAnimals: epicCount,
                legendaryAnimals: legendaryCount,
                plantsProtected: animalCollection.hallOfFame ? animalCollection.hallOfFame.length : 0,

                // Plant system
                plantsGrown: plantsGrown,
                legendaryPlants: legendaryPlants,

                // Streak
                streak: quizProgress.streakDays || 0,

                // Subject-specific (placeholder - needs tracking implementation)
                subjectProgress: subjectProgress,

                // Difficulty tracking (placeholder - needs tracking implementation)
                hardQuestions: quizProgress.hardCorrect || 0,

                // Time tracking (placeholder - needs tracking implementation)
                fastAnswers: quizProgress.fastAnswers || 0,
                studyTime: quizProgress.totalStudyTime || 0, // in minutes

                // Special achievements (placeholder - needs tracking implementation)
                comeback: quizProgress.comebackCount || 0,
                noSkip: quizProgress.noSkipSessions || 0,
                earlyBird: quizProgress.earlyBirdCount || 0,
                nightOwl: quizProgress.nightOwlCount || 0,
                weekend: quizProgress.weekendCount || 0,

                // Gacha stats
                gachaCount: animalCollection.gachaCount || 0,

                // Money saved
                moneySaved: farmState.money || 0,

                // Tickets earned (placeholder - needs tracking implementation)
                ticketsEarned: quizProgress.ticketsEarned || 0
            };

            // Load achievement states
            const savedAchievements = JSON.parse(localStorage.getItem('achievements') || '{}');
            userProgress.achievements = savedAchievements;
        }

        function checkAchievements() {
            let newAchievements = [];

            achievements.forEach(achievement => {
                const isCompleted = userProgress.achievements[achievement.id]?.completed || false;
                const isClaimed = userProgress.achievements[achievement.id]?.claimed || false;

                if (!isCompleted) {
                    let requirementMet = false;
                    const req = achievement.requirement;

                    switch (req.type) {
                        case 'totalCorrect':
                        case 'sessions':
                        case 'perfectAccuracy':
                        case 'animalsCollected':
                        case 'plantsProtected':
                        case 'rareAnimals':
                        case 'epicAnimals':
                        case 'legendaryAnimals':
                        case 'plantsGrown':
                        case 'legendaryPlants':
                        case 'streak':
                        case 'hardQuestions':
                        case 'fastAnswers':
                        case 'studyTime':
                        case 'comeback':
                        case 'noSkip':
                        case 'earlyBird':
                        case 'nightOwl':
                        case 'weekend':
                        case 'gachaCount':
                        case 'moneySaved':
                        case 'ticketsEarned':
                            requirementMet = userProgress[req.type] >= req.value;
                            break;
                        case 'subjectCorrect':
                            const subjectCorrect = userProgress.subjectProgress[req.subject] || 0;
                            requirementMet = subjectCorrect >= req.value;
                            break;
                        case 'allSubjects':
                            // Check if all subjects have at least req.value correct answers
                            const subjects = ['math', 'english', 'science', 'korean', 'social', 'general', 'idiom', 'person', 'economy', 'etc'];
                            requirementMet = subjects.every(subject =>
                                (userProgress.subjectProgress[subject] || 0) >= req.value
                            );
                            break;
                        case 'allAchievements':
                            // Count completed achievements (excluding this one)
                            const completedCount = achievements.filter(a =>
                                a.id !== achievement.id && userProgress.achievements[a.id]?.completed
                            ).length;
                            requirementMet = completedCount >= req.value;
                            break;
                    }

                    if (requirementMet) {
                        // Mark as completed
                        if (!userProgress.achievements[achievement.id]) {
                            userProgress.achievements[achievement.id] = {};
                        }
                        userProgress.achievements[achievement.id].completed = true;
                        userProgress.achievements[achievement.id].completedAt = Date.now();
                        newAchievements.push(achievement);
                    }
                }

                // Check for unclaimed rewards
                if (isCompleted && !isClaimed) {
                    unclaimedRewards.push(achievement);
                }
            });

            // Save updated achievements
            localStorage.setItem('achievements', JSON.stringify(userProgress.achievements));

            // Show celebration for new achievements
            if (newAchievements.length > 0) {
                showAchievementNotification(newAchievements);
            }

            return newAchievements.length > 0;
        }

        function displayAchievements() {
            const container = document.getElementById('achievementsList');
            
            container.innerHTML = achievements.map(achievement => {
                const isCompleted = userProgress.achievements[achievement.id]?.completed || false;
                const isClaimed = userProgress.achievements[achievement.id]?.claimed || false;
                const progress = getAchievementProgress(achievement);
                
                const cardClass = isCompleted ? 'completed' : 'locked';
                const rewardText = formatReward(achievement.reward);
                
                return `
                    <div class="achievement-card ${cardClass} rounded-lg border-2 p-4 ${isCompleted && !isClaimed ? 'celebration' : ''}">
                        <div class="flex items-start space-x-3">
                            <div class="text-3xl">${achievement.icon}</div>
                            <div class="flex-1">
                                <div class="flex items-center justify-between mb-1">
                                    <div class="font-bold text-gray-800">${achievement.name}</div>
                                    <div class="text-xs px-2 py-1 rounded-full ${getTierColor(achievement.tier)}">${getTierName(achievement.tier)}</div>
                                </div>
                                <div class="text-sm text-gray-600 mb-2">${achievement.description}</div>
                                
                                <!-- Progress Bar -->
                                <div class="bg-gray-200 rounded-full h-2 mb-2">
                                    <div class="achievement-progress bg-blue-500 h-2 rounded-full" 
                                         style="width: ${Math.min(progress.current / progress.total * 100, 100)}%"></div>
                                </div>
                                <div class="text-xs text-gray-500 mb-2">
                                    ${progress.current}/${progress.total} ${progress.unit}
                                </div>
                                
                                <!-- Reward -->
                                <div class="text-xs ${isCompleted ? 'text-yellow-700' : 'text-gray-500'}">
                                    ğŸ ë³´ìƒ: ${rewardText}
                                </div>
                                
                                <!-- Status -->
                                <div class="mt-2">
                                    ${isCompleted && isClaimed ? 
                                        '<span class="text-xs px-2 py-1 bg-green-100 text-green-600 rounded-full">âœ… ìˆ˜ë ¹ ì™„ë£Œ</span>' :
                                        isCompleted && !isClaimed ?
                                        '<span class="text-xs px-2 py-1 bg-yellow-100 text-yellow-600 rounded-full">ğŸ ìˆ˜ë ¹ ëŒ€ê¸°</span>' :
                                        '<span class="text-xs px-2 py-1 bg-gray-100 text-gray-500 rounded-full">â³ ì§„í–‰ ì¤‘</span>'
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function getAchievementProgress(achievement) {
            const req = achievement.requirement;
            let current = 0;
            let unit = '';

            switch (req.type) {
                case 'totalCorrect':
                    current = userProgress.totalCorrect;
                    unit = 'ì •ë‹µ';
                    break;
                case 'sessions':
                    current = userProgress.sessions;
                    unit = 'ì„¸ì…˜';
                    break;
                case 'perfectAccuracy':
                    current = userProgress.perfectAccuracy;
                    unit = 'ì™„ë²½í•œ í€´ì¦ˆ';
                    break;
                case 'animalsCollected':
                    current = userProgress.animalsCollected;
                    unit = 'ë™ë¬¼';
                    break;
                case 'rareAnimals':
                    current = userProgress.rareAnimals;
                    unit = 'ë ˆì–´ ë™ë¬¼';
                    break;
                case 'epicAnimals':
                    current = userProgress.epicAnimals;
                    unit = 'ì—í”½ ë™ë¬¼';
                    break;
                case 'legendaryAnimals':
                    current = userProgress.legendaryAnimals;
                    unit = 'ë ˆì „ë”ë¦¬ ë™ë¬¼';
                    break;
                case 'plantsProtected':
                    current = userProgress.plantsProtected;
                    unit = 'ë³´í˜¸';
                    break;
                case 'plantsGrown':
                    current = userProgress.plantsGrown;
                    unit = 'ì‹ë¬¼';
                    break;
                case 'legendaryPlants':
                    current = userProgress.legendaryPlants;
                    unit = 'ë ˆì „ë”ë¦¬ ì‹ë¬¼';
                    break;
                case 'streak':
                    current = userProgress.streak;
                    unit = 'ì¼';
                    break;
                case 'subjectCorrect':
                    current = userProgress.subjectProgress[req.subject] || 0;
                    unit = 'ì •ë‹µ';
                    break;
                case 'allSubjects':
                    const subjects = ['math', 'english', 'science', 'korean', 'social', 'general', 'idiom', 'person', 'economy', 'etc'];
                    current = subjects.filter(s => (userProgress.subjectProgress[s] || 0) >= req.value).length;
                    unit = 'ê³¼ëª©';
                    break;
                case 'hardQuestions':
                    current = userProgress.hardQuestions;
                    unit = 'ì–´ë ¤ìš´ ë¬¸ì œ';
                    break;
                case 'fastAnswers':
                    current = userProgress.fastAnswers;
                    unit = 'ë¹ ë¥¸ ì •ë‹µ';
                    break;
                case 'studyTime':
                    current = userProgress.studyTime;
                    unit = 'ë¶„';
                    break;
                case 'comeback':
                    current = userProgress.comeback;
                    unit = 'ì¬ê¸°';
                    break;
                case 'noSkip':
                    current = userProgress.noSkip;
                    unit = 'ì„¸ì…˜';
                    break;
                case 'earlyBird':
                    current = userProgress.earlyBird;
                    unit = 'íšŒ';
                    break;
                case 'nightOwl':
                    current = userProgress.nightOwl;
                    unit = 'íšŒ';
                    break;
                case 'weekend':
                    current = userProgress.weekend;
                    unit = 'íšŒ';
                    break;
                case 'gachaCount':
                    current = userProgress.gachaCount;
                    unit = 'ë½‘ê¸°';
                    break;
                case 'moneySaved':
                    current = userProgress.moneySaved;
                    unit = 'ì›';
                    break;
                case 'ticketsEarned':
                    current = userProgress.ticketsEarned;
                    unit = 'í‹°ì¼“';
                    break;
                case 'allAchievements':
                    current = achievements.filter(a =>
                        a.id !== achievement.id && userProgress.achievements[a.id]?.completed
                    ).length;
                    unit = 'ì—…ì ';
                    break;
            }

            return { current, total: req.value, unit };
        }

        function getTierColor(tier) {
            const colors = {
                bronze: 'bg-orange-100 text-orange-600',
                silver: 'bg-gray-100 text-gray-600', 
                gold: 'bg-yellow-100 text-yellow-600',
                diamond: 'bg-blue-100 text-blue-600'
            };
            return colors[tier] || colors.bronze;
        }

        function getTierName(tier) {
            const names = {
                bronze: 'ë¸Œë¡ ì¦ˆ',
                silver: 'ì‹¤ë²„',
                gold: 'ê³¨ë“œ', 
                diamond: 'ë‹¤ì´ì•„'
            };
            return names[tier] || tier;
        }

        function formatReward(reward) {
            const parts = [];
            if (reward.money) parts.push(`ğŸ’°${reward.money}ì›`);
            if (reward.normalTickets) parts.push(`ğŸ«ì¼ë°˜ ${reward.normalTickets}ì¥`);
            if (reward.premiumTickets) parts.push(`ğŸŸï¸í”„ë¦¬ë¯¸ì—„ ${reward.premiumTickets}ì¥`);
            return parts.join(', ');
        }

        function updateStats() {
            document.getElementById('totalCorrect').textContent = userProgress.totalCorrect;
            document.getElementById('totalSessions').textContent = userProgress.sessions;
            
            const completedCount = achievements.filter(a => 
                userProgress.achievements[a.id]?.completed
            ).length;
            document.getElementById('completedAchievements').textContent = completedCount;
            
            // Update claim button
            const claimBtn = document.getElementById('claimRewardsBtn');
            if (unclaimedRewards.length > 0) {
                claimBtn.disabled = false;
                claimBtn.textContent = `ğŸ ëª¨ë“  ë³´ìƒ ìˆ˜ë ¹ (${unclaimedRewards.length}ê°œ)`;
            } else {
                claimBtn.disabled = true;
                claimBtn.textContent = 'ğŸ ìˆ˜ë ¹í•  ë³´ìƒ ì—†ìŒ';
            }
        }

        function claimAllRewards() {
            if (unclaimedRewards.length === 0) return;

            let totalRewards = { money: 0, normalTickets: 0, premiumTickets: 0 };

            unclaimedRewards.forEach(achievement => {
                const reward = achievement.reward;
                if (reward.money) totalRewards.money += reward.money;
                if (reward.normalTickets) totalRewards.normalTickets += reward.normalTickets;
                if (reward.premiumTickets) totalRewards.premiumTickets += reward.premiumTickets;

                // Mark as claimed
                userProgress.achievements[achievement.id].claimed = true;
            });

            // Apply rewards to game state
            const farmState = JSON.parse(localStorage.getItem('simpleFarmState') || '{}');
            farmState.money = (farmState.money || 0) + totalRewards.money;
            localStorage.setItem('simpleFarmState', JSON.stringify(farmState));

            // Apply tickets to plant-system
            try {
                const plantSystemUser = JSON.parse(localStorage.getItem('plantSystemUser') || '{}');
                if (!plantSystemUser.rewards) {
                    plantSystemUser.rewards = {
                        growthTickets: [],
                        normalGachaTickets: 0,
                        premiumGachaTickets: 0
                    };
                }
                plantSystemUser.rewards.normalGachaTickets = (plantSystemUser.rewards.normalGachaTickets || 0) + totalRewards.normalTickets;
                plantSystemUser.rewards.premiumGachaTickets = (plantSystemUser.rewards.premiumGachaTickets || 0) + totalRewards.premiumTickets;
                localStorage.setItem('plantSystemUser', JSON.stringify(plantSystemUser));
                console.log('âœ… Tickets added to plant-system:', totalRewards);
            } catch (e) {
                console.error('Error adding tickets to plant-system:', e);
            }

            // Save achievement states
            localStorage.setItem('achievements', JSON.stringify(userProgress.achievements));

            // Show reward notification
            const rewardMessages = [];
            if (totalRewards.money > 0) rewardMessages.push(`ğŸ’° ëˆ: ${totalRewards.money}ì›`);
            if (totalRewards.normalTickets > 0) rewardMessages.push(`ğŸ« ì¼ë°˜ ë½‘ê¸°ê¶Œ: ${totalRewards.normalTickets}ì¥`);
            if (totalRewards.premiumTickets > 0) rewardMessages.push(`ğŸŸï¸ í”„ë¦¬ë¯¸ì—„ ë½‘ê¸°ê¶Œ: ${totalRewards.premiumTickets}ì¥`);

            alert(`ğŸ‰ ë³´ìƒì„ ë°›ì•˜ìŠµë‹ˆë‹¤!\n\n${rewardMessages.join('\n')}\n\nê³„ì†í•´ì„œ ëª©í‘œë¥¼ ë‹¬ì„±í•´ë³´ì„¸ìš”!`);

            // Refresh display
            unclaimedRewards = [];
            updateStats();
            displayAchievements();
        }

        function showAchievementNotification(newAchievements) {
            const messages = newAchievements.map(a => `ğŸ† ${a.name} ë‹¬ì„±!`).join('\n');
            alert(`ì¶•í•˜í•©ë‹ˆë‹¤!\n\n${messages}\n\nì—…ì  í˜ì´ì§€ì—ì„œ ë³´ìƒì„ ë°›ìœ¼ì„¸ìš”!`);
        }

        function goHome() {
            window.location.href = 'index.html';
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadUserProgress();
            checkAchievements();
            updateStats();
            displayAchievements();
        });
    </script>
</body>
</html>