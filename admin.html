<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì í˜ì´ì§€ - EduPet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="firebase-config.js"></script>
    <script src="firebase-auth.js"></script>
    <script src="firebase-integration.js"></script>
    <script src="plant-system.js"></script>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-6 max-w-2xl">
        <div class="bg-white p-8 rounded-lg shadow-md">
            <h1 class="text-2xl font-bold text-gray-800 mb-6">ğŸ”’ EduPet ê´€ë¦¬ì í˜ì´ì§€</h1>

            <!-- ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ -->
            <div id="password-section" class="mb-8">
                <label for="admin-password" class="block text-sm font-medium text-gray-700 mb-2">ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”</label>
                <input type="password" id="admin-password" class="w-full p-2 border border-gray-300 rounded-md" placeholder="ë¹„ë°€ë²ˆí˜¸">
                <button onclick="checkPassword()" class="mt-2 w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600">ì¸ì¦</button>
            </div>

            <!-- ê´€ë¦¬ì ê¸°ëŠ¥ (ìˆ¨ê¹€) -->
            <div id="admin-functions" class="hidden">
                <div class="p-4 bg-green-50 border-l-4 border-green-500 mb-6">
                    <p class="text-green-800 font-semibold">âœ… ì¸ì¦ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                </div>

                <!-- ë‚´ ë°ì´í„° ì´ˆê¸°í™” -->
                <div class="mb-8 p-4 border rounded-lg">
                    <h2 class="text-lg font-bold text-red-600 mb-2">ë‚´ ë°ì´í„° ì „ì²´ ì´ˆê¸°í™”</h2>
                    <p class="text-sm text-gray-600 mb-4">í˜„ì¬ ë¡œê·¸ì¸ëœ ì‚¬ìš©ìì˜ ë¡œì»¬ ë°ì´í„°ì™€ ì„œë²„ ë°ì´í„°ë¥¼ ëª¨ë‘ ì‚­ì œí•©ë‹ˆë‹¤. íŠœí† ë¦¬ì–¼ë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ê²Œ ë©ë‹ˆë‹¤.</p>
                    <button onclick="resetMyData()" class="w-full bg-red-500 text-white py-2 rounded-md hover:bg-red-600">ë‚´ ë°ì´í„° ì´ˆê¸°í™” ì‹¤í–‰</button>
                </div>

                <!-- íŠ¹ì • ì‚¬ìš©ì ë°ì´í„° ì‚­ì œ -->
                <div class="mb-8 p-4 border rounded-lg">
                    <h2 class="text-lg font-bold text-purple-600 mb-2">íŠ¹ì • ì‚¬ìš©ì ë°ì´í„° ì‚­ì œ</h2>
                    <p class="text-sm text-gray-600 mb-4">ì‚­ì œí•  ì‚¬ìš©ìë¥¼ ì„ íƒí•˜ì„¸ìš”. í•´ë‹¹ ì‚¬ìš©ìì˜ ì„œë²„ ë°ì´í„°(í•™ìŠµ ê¸°ë¡, ì¬í™” ë“±)ë§Œ ì‚­ì œë©ë‹ˆë‹¤.</p>
                    <div class="flex gap-2">
                        <select id="user-select-dropdown" class="flex-grow p-2 border border-gray-300 rounded-md">
                            <option value="">ì‚¬ìš©ì ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</option>
                        </select>
                        <button onclick="deleteOtherUserData()" class="bg-purple-500 text-white px-6 py-2 rounded-md hover:bg-purple-600">ì‚­ì œ ì‹¤í–‰</button>
                    </div>
                </div>

                <!-- ê°œë°œ ë„êµ¬ -->
                <div class="mb-8 p-4 border rounded-lg bg-blue-50">
                    <h2 class="text-xl font-bold text-blue-700 mb-4">âš™ï¸ ê°œë°œ ë„êµ¬</h2>

                    <div class="space-y-3">
                        <button onclick="skipPlantTime()" class="w-full px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 text-left">
                            â° ì‹ë¬¼ ì‹œê°„ ê±´ë„ˆë›°ê¸° (24ì‹œê°„)
                            <div class="text-xs text-blue-100 mt-1">ëª¨ë“  ì‹ë¬¼ì„ 24ì‹œê°„ ê²½ê³¼ ìƒíƒœë¡œ ë³€ê²½</div>
                        </button>

                        <button onclick="addTestTickets()" class="w-full px-4 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 text-left">
                            ğŸ« í…ŒìŠ¤íŠ¸ ì„±ì¥ê¶Œ ì¶”ê°€
                            <div class="text-xs text-green-100 mt-1">ì„±ì¥ê¶Œ 5ê°œ ì¦‰ì‹œ ì§€ê¸‰</div>
                        </button>

                        <button onclick="addTestMoney()" class="w-full px-4 py-3 bg-pink-500 text-white rounded-lg hover:bg-pink-600 text-left">
                            ğŸ’° í…ŒìŠ¤íŠ¸ ëˆ ì¶”ê°€
                            <div class="text-xs text-pink-100 mt-1">1000ì› ì¦‰ì‹œ ì§€ê¸‰</div>
                        </button>

                        <button onclick="completeLearningMissions()" class="w-full px-4 py-3 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 text-left">
                            âœ… í•™ìŠµ ë¯¸ì…˜ ëª¨ë‘ ì™„ë£Œ
                            <div class="text-xs text-indigo-100 mt-1">9ê³¼ëª© ëª¨ë‘ ì™„ë£Œ ì²˜ë¦¬ (ë³´ìƒ í¬í•¨)</div>
                        </button>
                    </div>
                </div>

                <!-- ë°ì´í„° ì´ˆê¸°í™” ë„êµ¬ -->
                <div class="p-4 border rounded-lg bg-orange-50">
                    <h2 class="text-xl font-bold text-orange-700 mb-4">ğŸ—‘ï¸ ë°ì´í„° ì´ˆê¸°í™” ë„êµ¬</h2>

                    <div class="space-y-3">
                        <button onclick="resetPlants()" class="w-full px-4 py-3 bg-teal-500 text-white rounded-lg hover:bg-teal-600 text-left">
                            ğŸŒ± ì‹ë¬¼ë§Œ ì´ˆê¸°í™”
                            <div class="text-xs text-teal-100 mt-1">ëª¨ë“  ì‹ë¬¼ ì œê±° (ë³´ìƒì€ ìœ ì§€)</div>
                        </button>

                        <button onclick="resetDaily()" class="w-full px-4 py-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 text-left">
                            ğŸ“… ì¼ì¼ ì§„í–‰ë¥  ì´ˆê¸°í™”
                            <div class="text-xs text-yellow-100 mt-1">ì˜¤ëŠ˜ ì™„ë£Œí•œ ê³¼ëª© ë¦¬ì…‹</div>
                        </button>

                        <button onclick="resetLearningMissions()" class="w-full px-4 py-3 bg-slate-500 text-white rounded-lg hover:bg-slate-600 text-left">
                            ğŸ”„ í•™ìŠµ ë¯¸ì…˜ ì´ˆê¸°í™”
                            <div class="text-xs text-slate-100 mt-1">ëª¨ë“  ê³¼ëª© ë¯¸ì™„ë£Œ ìƒíƒœë¡œ ë¦¬ì…‹</div>
                        </button>

                        <button onclick="resetAchievements()" class="w-full px-4 py-3 bg-amber-500 text-white rounded-lg hover:bg-amber-600 text-left">
                            ğŸ† ì—…ì  ë°ì´í„° ì´ˆê¸°í™”
                            <div class="text-xs text-amber-100 mt-1">ì—…ì  ë° í€´ì¦ˆ ì§„í–‰ ë°ì´í„° ì‚­ì œ</div>
                        </button>

                        <button onclick="resetAnalytics()" class="w-full px-4 py-3 bg-violet-500 text-white rounded-lg hover:bg-violet-600 text-left">
                            ğŸ“Š ë¶„ì„ ë°ì´í„° ì´ˆê¸°í™”
                            <div class="text-xs text-violet-100 mt-1">í•™ìŠµ ë¶„ì„ íˆìŠ¤í† ë¦¬ ì‚­ì œ</div>
                        </button>

                        <button onclick="resetLearningProgress()" class="w-full px-4 py-3 bg-rose-500 text-white rounded-lg hover:bg-rose-600 text-left">
                            ğŸ“ˆ í•™ìŠµ ì§„í–‰ë¥  ì´ˆê¸°í™”
                            <div class="text-xs text-rose-100 mt-1">ê³¼ëª©ë³„ í•™ìŠµ í†µê³„ ì‚­ì œ</div>
                        </button>
                    </div>
                </div>

                <!-- í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸° -->
                <div class="mt-6">
                    <button onclick="window.location.href='index.html'" class="w-full px-4 py-3 bg-gray-500 text-white rounded-lg hover:bg-gray-600">
                        ğŸ  ë©”ì¸ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
                    </button>
                </div>
            </div>
            <div id="result-message" class="mt-6 text-center"></div>
        </div>
    </div>

    <script>
        // Firebase ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', async () => {
            await initFirebase();
            eduPetAuth.addAuthStateListener((state, user) => {
                if (state !== 'signed_in') {
                    document.getElementById('password-section').innerHTML = '<p class="text-red-500 text-center">ì´ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë¨¼ì € ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>';
                }
            });
        });

        function checkPassword() {
            const password = document.getElementById('admin-password').value;
            if (password === '8253') {
                document.getElementById('password-section').classList.add('hidden');
                document.getElementById('admin-functions').classList.remove('hidden');
                // ì¸ì¦ ì„±ê³µ ì‹œ ì‚¬ìš©ì ëª©ë¡ ë¡œë“œ
                loadAllUsers();
            } else {
                alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        }

        async function resetMyData() {
            const currentUser = eduPetAuth.currentUser;
            if (!currentUser) {
                showMessage('ë¡œê·¸ì¸ëœ ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤.', 'error');
                return;
            }

            if (!confirm('âš ï¸ ì •ë§ë¡œ [ë‚´ ë°ì´í„°]ë¥¼ ëª¨ë‘ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\në¡œì»¬ ë° ì„œë²„ì˜ ëª¨ë“  í•™ìŠµ ê¸°ë¡ì´ ì‚­ì œë˜ë©°, ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                return;
            }

            try {
                // 1. ë¡œì»¬ ë°ì´í„° ì‚­ì œ
                const keysToRemove = [
                    'plantSystemUser', 'plantSystemPlants', 'learningProgress', 'animalCollection',
                    'selectedSubjects', 'extraLearningMode', 'eduPetSettings', 'eduPetOnboardingCompleted'
                ];
                keysToRemove.forEach(key => localStorage.removeItem(key));
                console.log('ë¡œì»¬ ë°ì´í„° ì‚­ì œ ì™„ë£Œ.');

                // 2. Firebase ë°ì´í„° ì‚­ì œ (ì‚¬ìš©ì ë…¸ë“œ ì „ì²´ ì‚­ì œ)
                const uid = currentUser.uid;
                const userRef = firebase.database().ref('users/' + uid);
                await userRef.remove();
                console.log('Firebase ë°ì´í„° ì‚­ì œ ì™„ë£Œ.');

                showMessage('âœ… ëª¨ë“  ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. 2ì´ˆ í›„ íŠœí† ë¦¬ì–¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.', 'success');
                setTimeout(() => {
                    window.location.href = 'tutorial.html';
                }, 2000);

            } catch (error) {
                console.error('ë°ì´í„° ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                showMessage('âŒ ë°ì´í„° ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message, 'error');
            }
        }

        async function deleteOtherUserData() {
            const uidToDelete = document.getElementById('user-select-dropdown').value;
            if (!uidToDelete) {
                showMessage('ì‚­ì œí•  ì‚¬ìš©ìë¥¼ ì„ íƒí•˜ì„¸ìš”.', 'error');
                return;
            }

            if (!confirm(`[ì£¼ì˜] ì •ë§ë¡œ ì‚¬ìš©ì ${uidToDelete}ì˜ ì„œë²„ ë°ì´í„°ë¥¼ ëª¨ë‘ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)) {
                return;
            }

            try {
                // íŠ¹ì • ì‚¬ìš©ìì˜ Firebase ë°ì´í„° ì‚­ì œ (ì‚¬ìš©ì ë…¸ë“œ ì „ì²´ ì‚­ì œ)
                const userRef = firebase.database().ref('users/' + uidToDelete);
                await userRef.remove();
                console.log(`Firebaseì—ì„œ ì‚¬ìš©ì ${uidToDelete}ì˜ ë°ì´í„° ì‚­ì œ ì™„ë£Œ.`);
                showMessage(`âœ… ì‚¬ìš©ì ${uidToDelete}ì˜ ì„œë²„ ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');

            } catch (error) {
                console.error('íŠ¹ì • ì‚¬ìš©ì ë°ì´í„° ì‚­ì œ ì˜¤ë¥˜:', error);
                showMessage(`âŒ ë°ì´í„° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`, 'error');
            }
        }

        // ì‹ ê·œ: ëª¨ë“  ì‚¬ìš©ì ëª©ë¡ì„ ë¶ˆëŸ¬ì™€ ë“œë¡­ë‹¤ìš´ì— ì±„ìš°ëŠ” í•¨ìˆ˜
        async function loadAllUsers() {
            const dropdown = document.getElementById('user-select-dropdown');
            try {
                const usersSnapshot = await firebase.database().ref('users').once('value');
                const users = usersSnapshot.val();
                if (users) {
                    dropdown.innerHTML = '<option value="">-- ì‚­ì œí•  ì‚¬ìš©ì ì„ íƒ --</option>';
                    Object.keys(users).forEach(uid => {
                        const nickname = users[uid].profile?.nickname || 'ìµëª…';
                        const option = document.createElement('option');
                        option.value = uid;
                        option.textContent = `${nickname} (${uid.substring(0, 8)}...)`;
                        dropdown.appendChild(option);
                    });
                } else {
                    dropdown.innerHTML = '<option value="">ì‚¬ìš©ìë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</option>';
                }
            } catch (error) {
                console.error('ëª¨ë“  ì‚¬ìš©ì ëª©ë¡ ë¡œë“œ ì‹¤íŒ¨:', error);
                dropdown.innerHTML = '<option value="">ë¡œë“œ ì‹¤íŒ¨</option>';
                showMessage('ì‚¬ìš©ì ëª©ë¡ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        function showMessage(msg, type = 'info') {
            const resultDiv = document.getElementById('result-message');
            resultDiv.textContent = msg;
            if (type === 'success') {
                resultDiv.className = 'mt-6 text-center text-green-600 font-semibold';
            } else if (type === 'error') {
                resultDiv.className = 'mt-6 text-center text-red-600 font-semibold';
            } else {
                resultDiv.className = 'mt-6 text-center text-gray-600';
            }
        }

        // ===== ê°œë°œ ë„êµ¬ í•¨ìˆ˜ë“¤ =====

        // ì‹ë¬¼ ì‹œê°„ ê±´ë„ˆë›°ê¸°
        function skipPlantTime() {
            try {
                const plants = plantSystem.getAllPlants();
                let updated = 0;

                Object.values(plants).forEach(plant => {
                    if (plant.status === 'PLANTED') {
                        plant.plantedAt = plantSystem.getCurrentTimestamp() - (25 * 60 * 60 * 1000);
                        plantSystem.savePlant(plant);
                        plantSystem.checkReadyStatus(plant);
                        plantSystem.savePlant(plant);
                        updated++;
                    }
                });

                showMessage(`âœ… ${updated}ê°œ ì‹ë¬¼ì˜ ì‹œê°„ì„ ê±´ë„ˆë›°ì—ˆìŠµë‹ˆë‹¤`, 'success');
            } catch (error) {
                console.error('ì‹œê°„ ê±´ë„ˆë›°ê¸° ì˜¤ë¥˜:', error);
                showMessage('âŒ ì‹œê°„ ê±´ë„ˆë›°ê¸° ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }

        // í…ŒìŠ¤íŠ¸ ì„±ì¥ê¶Œ ì¶”ê°€
        function addTestTickets() {
            try {
                const user = plantSystem.getUserData();
                const currentTime = plantSystem.getCurrentTimestamp();
                const expiresAt = currentTime + (24 * 60 * 60 * 1000);

                for (let i = 0; i < 5; i++) {
                    user.rewards.growthTickets.push({
                        ticketId: plantSystem.generateUUID(),
                        issuedAt: currentTime,
                        expiresAt: expiresAt
                    });
                }

                plantSystem.saveUserData(user);
                showMessage('âœ… ì„±ì¥ê¶Œ 5ê°œê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            } catch (error) {
                console.error('ì„±ì¥ê¶Œ ì¶”ê°€ ì˜¤ë¥˜:', error);
                showMessage('âŒ ì„±ì¥ê¶Œ ì¶”ê°€ ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }

        // í…ŒìŠ¤íŠ¸ ëˆ ì¶”ê°€
        function addTestMoney() {
            try {
                const user = plantSystem.getUserData();

                if (!user.wallet) {
                    user.wallet = { money: 0, water: 0 };
                }

                user.wallet.money += 1000;
                plantSystem.saveUserData(user);

                showMessage('âœ… 1000ì›ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            } catch (error) {
                console.error('ëˆ ì¶”ê°€ ì˜¤ë¥˜:', error);
                showMessage('âŒ ëˆ ì¶”ê°€ ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }

        // í•™ìŠµ ë¯¸ì…˜ ëª¨ë‘ ì™„ë£Œ
        function completeLearningMissions() {
            try {
                const user = plantSystem.getUserData();

                // 9ê³¼ëª© ëª¨ë‘ ì™„ë£Œ ì²˜ë¦¬
                const allSubjects = ['english', 'math', 'science', 'korean', 'social', 'common', 'idiom', 'person', 'economy'];

                allSubjects.forEach((subject, index) => {
                    if (!user.daily.completedSubjectIds.includes(subject)) {
                        plantSystem.completeSubject(user, subject, subject);
                    }
                });

                showMessage('âœ… 9ê³¼ëª© ëª¨ë‘ ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤ (ë³´ìƒ í¬í•¨)', 'success');
            } catch (error) {
                console.error('í•™ìŠµ ë¯¸ì…˜ ì™„ë£Œ ì˜¤ë¥˜:', error);
                showMessage('âŒ í•™ìŠµ ë¯¸ì…˜ ì™„ë£Œ ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }

        // ===== ë°ì´í„° ì´ˆê¸°í™” í•¨ìˆ˜ë“¤ =====

        // ì‹ë¬¼ë§Œ ì´ˆê¸°í™”
        function resetPlants() {
            if (!confirm('ëª¨ë“  ì‹ë¬¼ì„ ì œê±°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }

            try {
                localStorage.removeItem('plantSystemPlants');
                showMessage('âœ… ì‹ë¬¼ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            } catch (error) {
                console.error('ì‹ë¬¼ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                showMessage('âŒ ì‹ë¬¼ ì´ˆê¸°í™” ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }

        // ì¼ì¼ ì§„í–‰ë¥  ì´ˆê¸°í™”
        function resetDaily() {
            if (!confirm('ì¼ì¼ ì§„í–‰ë¥ ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }

            try {
                const user = plantSystem.getUserData();
                user.daily.completedSubjects = 0;
                user.daily.completedSubjectIds = [];
                user.daily.lastResetDate = plantSystem.getCurrentDate();
                plantSystem.saveUserData(user);

                showMessage('âœ… ì¼ì¼ ì§„í–‰ë¥ ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            } catch (error) {
                console.error('ì¼ì¼ ì§„í–‰ë¥  ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                showMessage('âŒ ì¼ì¼ ì§„í–‰ë¥  ì´ˆê¸°í™” ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }

        // í•™ìŠµ ë¯¸ì…˜ ì´ˆê¸°í™”
        function resetLearningMissions() {
            if (!confirm('ëª¨ë“  í•™ìŠµ ë¯¸ì…˜ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n(ë³´ìƒì€ ìœ ì§€ë©ë‹ˆë‹¤)')) {
                return;
            }

            try {
                const user = plantSystem.getUserData();

                // ì¼ì¼ ì§„í–‰ë¥ ë§Œ ì´ˆê¸°í™” (ë³´ìƒì€ ìœ ì§€)
                user.daily.completedSubjects = 0;
                user.daily.completedSubjectIds = [];
                user.daily.lastResetDate = plantSystem.getCurrentDate();

                plantSystem.saveUserData(user);

                showMessage('âœ… í•™ìŠµ ë¯¸ì…˜ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            } catch (error) {
                console.error('í•™ìŠµ ë¯¸ì…˜ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                showMessage('âŒ í•™ìŠµ ë¯¸ì…˜ ì´ˆê¸°í™” ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }

        // ì—…ì  ë°ì´í„° ì´ˆê¸°í™”
        function resetAchievements() {
            if (!confirm('âš ï¸ ì—…ì  ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì‚­ì œë  ë°ì´í„°:\n- ë‹¬ì„±í•œ ì—…ì  ëª©ë¡\n- í€´ì¦ˆ ì§„í–‰ í†µê³„ (ì´ ì •ë‹µ ìˆ˜, ì„¸ì…˜ ìˆ˜ ë“±)\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!')) {
                return;
            }

            try {
                localStorage.removeItem('achievements');
                localStorage.removeItem('quizProgress');

                showMessage('âœ… ì—…ì  ë°ì´í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                console.log('[ê´€ë¦¬ì] ì—…ì  ë°ì´í„° ì´ˆê¸°í™” ì™„ë£Œ');
            } catch (error) {
                console.error('ì—…ì  ë°ì´í„° ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                showMessage('âŒ ì—…ì  ë°ì´í„° ì´ˆê¸°í™” ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }

        // ë¶„ì„ ë°ì´í„° ì´ˆê¸°í™”
        function resetAnalytics() {
            if (!confirm('âš ï¸ í•™ìŠµ ë¶„ì„ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì‚­ì œë  ë°ì´í„°:\n- í•™ìŠµ ì„¸ì…˜ íˆìŠ¤í† ë¦¬\n- ë‚œì´ë„ ì¡°ì • ê¸°ë¡\n- ì™„ë£Œ íƒ€ì… ë¶„ì„ ë°ì´í„°\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!')) {
                return;
            }

            try {
                localStorage.removeItem('quizAnalyticsHistory');

                showMessage('âœ… ë¶„ì„ ë°ì´í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                console.log('[ê´€ë¦¬ì] ë¶„ì„ ë°ì´í„° ì´ˆê¸°í™” ì™„ë£Œ');
            } catch (error) {
                console.error('ë¶„ì„ ë°ì´í„° ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                showMessage('âŒ ë¶„ì„ ë°ì´í„° ì´ˆê¸°í™” ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }

        // í•™ìŠµ ì§„í–‰ë¥  ì´ˆê¸°í™”
        function resetLearningProgress() {
            if (!confirm('âš ï¸ í•™ìŠµ ì§„í–‰ë¥  ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì‚­ì œë  ë°ì´í„°:\n- ê³¼ëª©ë³„ í•™ìŠµ í†µê³„\n- ì´ ë¬¸ì œ ìˆ˜ ë° ì •ë‹µ ìˆ˜\n- ì—°ì† í•™ìŠµ ê¸°ë¡\n- ì¼ì¼ í™œë™ ë°ì´í„°\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!')) {
                return;
            }

            try {
                localStorage.removeItem('learningProgress');

                showMessage('âœ… í•™ìŠµ ì§„í–‰ë¥ ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                console.log('[ê´€ë¦¬ì] í•™ìŠµ ì§„í–‰ë¥  ì´ˆê¸°í™” ì™„ë£Œ');
            } catch (error) {
                console.error('í•™ìŠµ ì§„í–‰ë¥  ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                showMessage('âŒ í•™ìŠµ ì§„í–‰ë¥  ì´ˆê¸°í™” ì‹¤íŒ¨: ' + error.message, 'error');
            }
        }
    </script>
</body>
</html>
